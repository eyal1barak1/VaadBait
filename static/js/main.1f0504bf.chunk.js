(this["webpackJsonpfinal-proj-vaad-bait"]=this["webpackJsonpfinal-proj-vaad-bait"]||[]).push([[0],{471:function(e,t,n){},472:function(e,t,n){},476:function(e,t,n){},477:function(e,t,n){},478:function(e,t,n){},711:function(e,t){},713:function(e,t){},724:function(e,t){},726:function(e,t){},752:function(e,t){},754:function(e,t){},755:function(e,t){},760:function(e,t){},762:function(e,t){},781:function(e,t){},793:function(e,t){},796:function(e,t){},840:function(e,t,n){},841:function(e,t,n){},842:function(e,t,n){},843:function(e,t,n){},844:function(e,t,n){},845:function(e,t,n){},846:function(e,t,n){},847:function(e,t,n){},848:function(e,t,n){},849:function(e,t,n){},944:function(e,t,n){},945:function(e,t,n){},946:function(e,t,n){},947:function(e,t,n){},948:function(e,t,n){},949:function(e,t,n){},950:function(e,t,n){"use strict";n.r(t);var a=n(1),s=n(0),c=n.n(s),r=n(59),i=n.n(r),o=(n(470),n(471),n(9)),l=n(98),j=n(29),d=(n(472),n(309)),u=n(310),b=n(311),h=n(223),O=n(220),x=n(458);var m=function(e){var t=e.activeUser,n=e.onLogout,s=null;return t&&"committee"===t.role&&(s=Object(a.jsx)(O.a.Link,{href:"#/tenants",children:"Tenants"})),Object(a.jsxs)(x.a,{bg:"light",expand:"lg",children:[Object(a.jsx)(x.a.Brand,{href:"#/",children:"HOA Systems"}),Object(a.jsx)(x.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(a.jsxs)(x.a.Collapse,{id:"basic-navbar-nav",children:[Object(a.jsxs)(O.a,{className:"mr-auto",children:[t?Object(a.jsx)(O.a.Link,{href:"#/messages",children:"Messages"}):null,t?Object(a.jsx)(O.a.Link,{href:"#/voting",children:"Voting"}):null,s]}),Object(a.jsxs)(O.a,{className:"ml-auto",children:[t?null:Object(a.jsx)(O.a.Link,{href:"#/login",children:"Login"}),t?null:Object(a.jsx)(O.a.Link,{href:"#/signup",children:"Signup"}),t?Object(a.jsx)(O.a.Link,{disabled:!0,children:"Hi "+t.fname+" "+t.lname+" :)"}):null,t?Object(a.jsx)(O.a.Link,{onClick:function(){return n()},children:"Logout"}):null]})]})]})},g=n(308);n(476);var f=function(e){var t=e.img,n=e.desc;return Object(a.jsxs)(g.a,{className:"c-home-page-card",children:[Object(a.jsx)(g.a.Header,{children:n}),Object(a.jsx)(g.a.Img,{variant:"top",src:t})]})};n(477);var p=function(e){var t=e.activeUser,n=e.onLogout;return Object(a.jsxs)("div",{className:"p-home",children:[Object(a.jsx)(m,{activeUser:t,onLogout:n}),Object(a.jsx)(d.a,{children:Object(a.jsxs)(u.a,{className:"homePageTitle",children:[Object(a.jsx)("h4",{children:"Welcome to HOA Management System"}),Object(a.jsx)("p",{children:"Take your Homeowner Association Management to the next level and get an easy UI for full transparency"})]})}),Object(a.jsx)(u.a,{className:"homePageCards",children:Object(a.jsxs)(b.a,{children:[Object(a.jsx)(h.a,{children:Object(a.jsx)(f,{img:"https://www.brandknewmag.com/wp-content/uploads/2018/11/advt-283.jpg",desc:"Full Transparency"})}),Object(a.jsx)(h.a,{children:Object(a.jsx)(f,{img:"https://thumbor.forbes.com/thumbor/960x0/https%3A%2F%2Fspecials-images.forbesimg.com%2Fdam%2Fimageserve%2F1063184564%2F960x0.jpg%3Ffit%3Dscale",desc:"Vote Online"})}),Object(a.jsx)(h.a,{children:Object(a.jsx)(f,{img:"https://images.squarespace-cdn.com/content/v1/527fb6bae4b04f95c720a907/1522090505822-63JM5RD7L5EQ9JE8RIFC/ke17ZwdGBToddI8pDm48kARgRj3gF56o5pPCLcgX83YUqsxRUqqbr1mOJYKfIPR7LoDQ9mXPOjoJoqy81S2I8N_N4V1vUb5AoIIIbLZhVYxCRW4BPu10St3TBAUQYVKcLhP6FrlsjHNVjgHYYFOnZY2fkf53yXnTjPV0F2ewkRAjGmv5qrb73FDOk_nyAWmN/glenn-carstens-peters-203007.jpg",desc:"Write a message"})})]})})]})},v=n(35),C=n.n(v),w=n(60),y=n(438),L=n(459),N=n(102),U=(n(478),n(106)),S=function e(t){Object(U.a)(this,e),this.id=t.id,this.fname=t.get("fname"),this.lname=t.get("lname"),this.email=t.get("emailAddrr"),this.role=t.get("role"),this.building=t.get("building")},k=n(10),I=n.n(k);var T=function(e){var t=Object(s.useState)("john@john.com"),n=Object(o.a)(t,2),c=n[0],r=n[1],i=Object(s.useState)("123"),d=Object(o.a)(i,2),u=d[0],b=d[1],h=Object(s.useState)(!1),O=Object(o.a)(h,2),x=O[0],m=O[1],g=Object(s.useState)(!1),f=Object(o.a)(g,2),p=f[0],v=f[1],U=e.onLogin;function k(){return(k=Object(w.a)(C.a.mark((function e(){var t;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,I.a.User.logIn(c,u);case 3:t=e.sent,U(new S(t)),v(!0),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),console.error("Error while logging in user",e.t0),m(!0);case 12:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}return p?Object(a.jsx)(j.a,{to:"/messages"}):Object(a.jsxs)("div",{className:"p-login",children:[Object(a.jsx)("h1",{children:"Login to HOA"}),Object(a.jsxs)("p",{children:["or ",Object(a.jsx)(l.b,{to:"/signup",children:"create an account"})]}),x?Object(a.jsx)(y.a,{variant:"danger",children:"Invalid Credentials!"}):null,Object(a.jsxs)(L.a,{children:[Object(a.jsxs)(L.a.Group,{controlId:"formBasicEmail",children:[Object(a.jsx)(L.a.Label,{children:"Email address"}),Object(a.jsx)(L.a.Control,{type:"email",placeholder:"Enter email",value:c,onChange:function(e){return r(e.target.value)}}),Object(a.jsx)(L.a.Text,{className:"text-muted",children:"We'll never share your email with anyone else."})]}),Object(a.jsxs)(L.a.Group,{controlId:"formBasicPassword",children:[Object(a.jsx)(L.a.Label,{children:"Password"}),Object(a.jsx)(L.a.Control,{type:"password",placeholder:"Password",value:u,onChange:function(e){return b(e.target.value)}})]}),Object(a.jsx)(N.a,{variant:"success",type:"button",block:!0,onClick:function(){return k.apply(this,arguments)},children:"Login"})]})]})};n(840);var D=function(e){var t=Object(s.useState)("eyal@barak.com"),n=Object(o.a)(t,2),c=n[0],r=n[1],i=Object(s.useState)("123"),l=Object(o.a)(i,2),d=l[0],b=l[1],h=Object(s.useState)("Eyal"),O=Object(o.a)(h,2),x=O[0],m=O[1],g=Object(s.useState)("Barak"),f=Object(o.a)(g,2),p=f[0],v=f[1],C=Object(s.useState)("Einstein"),w=Object(o.a)(C,2),y=w[0],U=w[1],k=Object(s.useState)(!1),T=Object(o.a)(k,2),D=T[0],E=T[1],M=e.onLogin;return D?Object(a.jsx)(j.a,{to:"/messages"}):Object(a.jsxs)(u.a,{children:[Object(a.jsx)("h1",{children:"Create a Committee Member Account"}),Object(a.jsx)("div",{className:"p-signup",children:Object(a.jsxs)(L.a,{children:[Object(a.jsxs)(L.a.Group,{controlId:"formBasicfname",children:[Object(a.jsx)(L.a.Label,{children:"First Name"}),Object(a.jsx)(L.a.Control,{type:"text",placeholder:"Enter first name",value:x,onChange:function(e){return m(e.target.value)}})]}),Object(a.jsxs)(L.a.Group,{controlId:"formBasiclname",children:[Object(a.jsx)(L.a.Label,{children:"Last Name"}),Object(a.jsx)(L.a.Control,{type:"text",placeholder:"Enter last name",value:p,onChange:function(e){return v(e.target.value)}})]}),Object(a.jsxs)(L.a.Group,{controlId:"formBasicEmail",children:[Object(a.jsx)(L.a.Label,{children:"Email address"}),Object(a.jsx)(L.a.Control,{type:"email",placeholder:"Enter email",value:c,onChange:function(e){return r(e.target.value)}}),Object(a.jsx)(L.a.Text,{className:"text-muted",children:"We'll never share your email with anyone else."})]}),Object(a.jsxs)(L.a.Group,{controlId:"formBasicPassword",children:[Object(a.jsx)(L.a.Label,{children:"Password"}),Object(a.jsx)(L.a.Control,{type:"password",placeholder:"Password",value:d,onChange:function(e){return b(e.target.value)}})]}),Object(a.jsxs)(L.a.Group,{controlId:"formBasicbuilding",children:[Object(a.jsx)(L.a.Label,{children:"Building/Condomium Community Name"}),Object(a.jsx)(L.a.Control,{type:"text",placeholder:"Building/Condomium Community Name",value:y,onChange:function(e){return U(e.target.value)}})]}),Object(a.jsx)(N.a,{variant:"warning",type:"button",block:!0,onClick:function(){(new I.a.ACL).setPublicReadAccess(!0);var e=new I.a.User;e.set("username",x),e.set("email",c),e.set("fname",x),e.set("lname",p),e.set("building",y),e.set("img",""),e.set("role","committee"),e.set("password",d),e.set("emailAddrr",c),e.signUp().then((function(e){M(new S(e)),E(!0)})).catch((function(t){console.error("Error while signing up user",e)}))},children:"SignUp"})]})})]})},E=n(71),M=n(457),P=n(179);var F=function(e){var t=e.show,n=e.handleClose,c=e.addMessage,r=e.isUpdate,i=e.messageId,l=e.updateMessageContent,j=Object(s.useState)(""),d=Object(o.a)(j,2),u=d[0],O=d[1],x=Object(s.useState)(""),m=Object(o.a)(x,2),g=m[0],f=m[1],p=Object(s.useState)("Info"),v=Object(o.a)(p,2),C=v[0],w=v[1],y=Object(s.useState)(""),U=Object(o.a)(y,2),S=U[0],k=U[1];function I(){O(""),f(""),k(""),n()}return Object(a.jsxs)(M.a,{show:t,onHide:I,size:"xl",children:[Object(a.jsx)(M.a.Header,{closeButton:!0,children:Object(a.jsx)(M.a.Title,{children:"New Message"})}),Object(a.jsx)(M.a.Body,{children:Object(a.jsxs)(L.a,{children:[Object(a.jsxs)(L.a.Group,{as:b.a,controlId:"formHorizontalTitle",children:[Object(a.jsx)(L.a.Label,{column:!0,sm:2,children:"Title:"}),Object(a.jsx)(h.a,{sm:10,children:Object(a.jsx)(L.a.Control,{type:"text",placeholder:"Message Title",value:u,onChange:function(e){return O(e.target.value)}})})]}),Object(a.jsxs)(L.a.Group,{as:b.a,controlId:"formHorizontalDetails",children:[Object(a.jsx)(L.a.Label,{column:!0,sm:2,children:"Details:"}),Object(a.jsx)(h.a,{sm:10,children:Object(a.jsx)(L.a.Control,{as:"textarea",rows:3,type:"text",placeholder:"Message Details",value:g,onChange:function(e){return f(e.target.value)}})})]}),Object(a.jsxs)(L.a.Group,{as:b.a,controlId:"formHorizontalPriority",children:[Object(a.jsx)(L.a.Label,{column:!0,sm:2,children:"Priority:"}),Object(a.jsx)(h.a,{sm:10,children:Object(a.jsxs)(L.a.Control,{as:"select",onChange:function(e){return w(e.target.value)},children:[Object(a.jsx)("option",{children:" Info"}),Object(a.jsx)("option",{children:"Important"})]})})]}),Object(a.jsxs)(L.a.Group,{as:b.a,controlId:"formHorizontalImage",children:[Object(a.jsx)(L.a.Label,{column:!0,sm:2,children:"Image URL:"}),Object(a.jsx)(h.a,{sm:8,children:Object(a.jsx)(L.a.Control,{type:"text",placeholder:"Image URL",value:S,onChange:function(e){return k(e.target.value)}})}),Object(a.jsx)(h.a,{sm:2,children:Object(a.jsx)(P.a,{width:"100",height:"100",src:""===S?"https://www.arde.co.il/wp-content/uploads/2014/06/default-placeholder.png":S})})]})]})}),Object(a.jsx)("div",{children:"true"===r?Object(a.jsx)(M.a.Footer,{children:Object(a.jsx)(N.a,{variant:"primary",onClick:function(){l(u,g,C,S,i),I()},children:"Update Message"})}):Object(a.jsxs)(M.a.Footer,{children:[Object(a.jsx)(N.a,{variant:"secondary",onClick:I,children:"Cancel"}),Object(a.jsx)(N.a,{variant:"primary",onClick:function(){c(u,g,C,S),I()},children:"Create Message"})]})})]})};n(841);var B=function(e){var t=e.completed,n=e.text,c=e.fname,r=e.lname,i="form-check todoitem "+(t?"done":"undone"),l=Object(s.useState)(""),j=Object(o.a)(l,2),d=j[0],u=j[1];return Object(s.useEffect)((function(){d&&(d.classList.add("highlight"),setTimeout((function(e){e.classList.remove("highlight")}),500,d))}),[d]),Object(a.jsx)("li",{className:i,ref:function(e){return u(e)},children:Object(a.jsx)("label",{className:"form-check-label",children:c+" "+r+": "+n})})};n(842);var H=function(e){var t=e.items,n=e.activeUser;return Object(a.jsx)("ul",{className:"todolist",children:t.map((function(e){return Object(a.jsx)(B,{id:e.id,text:e.text,completed:e.done,activeUser:n,fname:e.userFname,lname:e.userLname},e.id)}))})},A=(n(843),function e(t){Object(U.a)(this,e),this.id=t.id,this.text=t.get("text"),this.done=t.get("done"),this.userFname=t.get("userFname"),this.userLname=t.get("userLname")});var G=function(e){var t=e.message,n=e.activeUser,c=Object(s.useState)(""),r=Object(o.a)(c,2),i=r[0],l=r[1],j=Object(s.useState)([]),d=Object(o.a)(j,2),u=d[0],b=d[1];return Object(s.useEffect)((function(){function e(){return(e=Object(w.a)(C.a.mark((function e(){var n,a,s;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=I.a.Object.extend("Comment"),(a=new I.a.Query(n)).equalTo("messageId",{__type:"Pointer",className:"Message",objectId:t.id}),e.next=5,a.find();case 5:s=e.sent,b(s.map((function(e){return new A(e)})));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}n&&function(){e.apply(this,arguments)}()}),[n,t]),Object(a.jsxs)("div",{children:[Object(a.jsx)("h3",{children:"Comments:"}),Object(a.jsx)("div",{className:"row",children:Object(a.jsx)("div",{children:Object(a.jsx)(H,{items:u,activeUser:n})})}),Object(a.jsxs)("form",{className:"row",children:[Object(a.jsx)("div",{children:Object(a.jsx)("input",{type:"text",placeholder:"Add Comment",className:"form-control",onChange:function(e){l(e.target.value)},value:i})}),Object(a.jsx)("div",{children:Object(a.jsx)("button",{className:"add-btn btn btn-primary",style:{visibility:"hidden"},onClick:function(e){var a=new(I.a.Object.extend("Comment"));a.set("text",i),a.set("done",!1),a.set("userFname",n.fname),a.set("userLname",n.lname),a.set("messageId",{__type:"Pointer",className:"Message",objectId:t.id}),a.save().then((function(e){b(u.concat(new A(a))),l(""),console.log("Comment created",e)}),(function(e){console.error("Error while creating Comment: ",e)}))}})})]})]})};n(844);var R=function(e){var t=e.message,n=e.addMessageItems,c=e.message_items,r=e.removeMessage,i=e.activeUser,l=e.updateMessageContent,j=Object(s.useState)(!1),d=Object(o.a)(j,2),O=d[0],x=d[1];return Object(a.jsxs)("div",{className:"c-message-card",children:[Object(a.jsx)(u.a,{fluid:!0,children:Object(a.jsxs)(b.a,{children:[Object(a.jsx)(h.a,{sm:6,children:Object(a.jsxs)(b.a,{children:[Object(a.jsx)(h.a,{sm:5,children:Object(a.jsx)("img",{alt:"messageImg",className:"message-image",src:""===t.img?"https://cdn3.iconfinder.com/data/icons/ui-thick-outline-5-of-5/100/ui_09_of_10_-14-512.png":t.img})}),Object(a.jsxs)(h.a,{sm:7,children:[Object(a.jsxs)("div",{className:"message-details",children:[Object(a.jsx)("label",{children:"Details: "}),Object(a.jsx)("p",{children:t.details})]}),Object(a.jsxs)("div",{className:"message-priority",children:[Object(a.jsx)("label",{children:"Priority: "}),Object(a.jsx)("p",{children:t.priority})]})]})]})}),Object(a.jsx)(h.a,{sm:4,children:Object(a.jsx)(G,{message:t,message_items:c,addMessageItems:n,activeUser:i})}),Object(a.jsxs)(h.a,{style:{visibility:"committee"===i.role?"visible":"hidden"},className:"message-card-buttons",sm:2,children:[Object(a.jsx)(N.a,{className:"b-update-button",variant:"info",onClick:function(){return x(!0)},children:"Update"}),Object(a.jsx)(N.a,{onClick:function(){r(t.id)},className:"b-delete-button",variant:"danger",children:"Delete"})]})]})}),Object(a.jsx)(F,{isUpdate:"true",show:O,handleClose:function(){return x(!1)},updateMessageContent:l,messageId:t.id})]})},V=(n(845),n(439));n(846);var z=function(e){var t=e.panels,n=e.updateMessage;return Object(a.jsx)(V.a,{variant:"success",children:t.map((function(e,t){return Object(a.jsxs)(g.a,{children:[Object(a.jsxs)(V.a.Toggle,{className:"accordionHeader",onClick:function(){return t=e.props.message.id,a=e.props.activeUser.id,void n(t,a);var t,a},as:g.a.Header,eventKey:t.toString(),children:[e.props.message.title,Object(a.jsx)("img",{alt:"messageImg",className:"readImage",width:"20",height:"20",src:"undefined"!==typeof e.props.message.isRead&&e.props.message.isRead.includes(e.props.activeUser.id)?"https://icon-library.com/images/read-message-icon/read-message-icon-10.jpg":"https://cdn3.iconfinder.com/data/icons/mailing-2/96/notification_unread_mail_message_96-512.png"})]}),Object(a.jsx)(V.a.Collapse,{eventKey:t.toString(),children:Object(a.jsx)(g.a.Body,{children:e})})]},t)}))})},Q=n(461),_=n(462),q=n(440),J=n(225),Y=n(441),W=n(46);n(847);var K=function(e){var t=e.filteredText,n=e.onFilterChange,s=e.FilterPriority,c=e.Sort,r=e.isMessagesPage;return Object(a.jsxs)(u.a,{children:[Object(a.jsxs)(b.a,{children:[Object(a.jsx)(h.a,{xs:r?7:12,children:Object(a.jsxs)(q.a,{size:"sm",className:"mb-3",onChange:function(e){return n(e)},value:t,children:[Object(a.jsx)(q.a.Prepend,{children:Object(a.jsx)(q.a.Text,{children:Object(a.jsx)(Q.a,{icon:_.a})})}),Object(a.jsx)(J.a,{placeholder:"Filter","aria-label":"Medium","aria-describedby":"inputGroup-sizing-sm"})]})}),r?Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(h.a,{children:Object(a.jsxs)(Y.a,{onSelect:s,size:"sm",variant:"warning",id:"dropdown-basic-button",title:"Filter by Priority",children:[Object(a.jsx)(W.a.Item,{children:"No Filter"}),Object(a.jsx)(W.a.Item,{children:"Info"}),Object(a.jsx)(W.a.Item,{children:"Important"})]})}),Object(a.jsx)(h.a,{children:Object(a.jsxs)(L.a.Group,{onChange:function(e){return c(e.target.id)},className:"sort-radio",controlId:"formBasicCheckboxFirst",children:[Object(a.jsx)("div",{className:"sortByLabel",children:Object(a.jsx)(L.a.Label,{children:"Sort By:"})}),Object(a.jsx)(L.a.Check,{inline:!0,id:"date",type:"radio",label:"Date",name:"sort"}),Object(a.jsx)(L.a.Check,{inline:!0,id:"priority",type:"radio",label:"Priority",name:"sort"})]})})]}):null]}),r?Object(a.jsx)("br",{}):Object(a.jsx)(a.Fragment,{children:" "})]})},X=function e(t){Object(U.a)(this,e),this.id=t.id,this.title=t.get("title"),this.details=t.get("details"),this.priority=t.get("priority"),this.building=t.get("building"),this.isRead=t.get("isRead"),this.img=t.get("img"),this.date=t.get("date")};var Z=function(e){var t=e.activeUser,n=e.onLogout,c=e.message_items,r=e.addMessageItems,i=Object(s.useState)(!1),l=Object(o.a)(i,2),d=l[0],u=l[1],b=Object(s.useState)(""),h=Object(o.a)(b,2),O=h[0],x=h[1],g=Object(s.useState)(""),f=Object(o.a)(g,2),p=f[0],v=f[1],y=Object(s.useState)([]),L=Object(o.a)(y,2),U=L[0],S=L[1],k=U.filter((function(e){return e.title.toLowerCase().includes(O.toLowerCase())||e.details.toLowerCase().includes(O.toLowerCase())}));function T(){return(T=Object(w.a)(C.a.mark((function e(t,n,a,s){var c,r,i;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=I.a.Object.extend("Message"),(r=new c).set("title",t),r.set("details",n),r.set("img",s),r.set("priority",a),r.set("date",(new Date).toString()),r.set("isRead",[]),r.set("building",I.a.User.current().attributes.building),r.relation("userId").add(I.a.User.current()),e.next=13,r.save();case 13:i=e.sent,S(U.concat(new X(i)));case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function D(e){var t=I.a.Object.extend("Message");new I.a.Query(t).get(e).then((function(t){t.destroy().then((function(t){var n=U.find((function(t){return t.id===e})),a=U.indexOf(n);U.splice(a,1),S(Object(E.a)(U)),console.log("Deleted Message",t)}),(function(e){console.error("Error while deleting Message",e)}))}))}function M(e,t,n,a,s){var c=I.a.Object.extend("Message");new I.a.Query(c).get(s).then((function(c){c.set("title",e),c.set("details",t),c.set("priority",n),c.set("img",a),c.save().then((function(c){var r=U.find((function(e){return e.id===s})),i=U.indexOf(r);U[i].title=e,U[i].details=t,U[i].priority=n,U[i].img=a,S(Object(E.a)(U)),console.log("Updated Message ",c)}),(function(e){console.error("Error while updating Message",e)}))}))}if(Object(s.useEffect)((function(){function e(){return(e=Object(w.a)(C.a.mark((function e(){var t,n,a;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=I.a.Object.extend("Message"),(n=new I.a.Query(t)).equalTo("userId",I.a.User.current()),e.next=5,n.find();case 5:a=e.sent,S(a.map((function(e){return new X(e)})));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}t&&function(){e.apply(this,arguments)}()}),[t]),!t)return Object(a.jsx)(j.a,{to:"/"});var P=(k=k.filter((function(e){return e.priority.toLowerCase().includes(p.toLowerCase())}))).map((function(e){return Object(a.jsx)(R,{message:e,message_items:c,addMessageItems:r,removeMessage:D,activeUser:t,updateMessageContent:M})}));return Object(a.jsxs)("div",{className:"p-messages",children:[Object(a.jsx)(m,{activeUser:t,onLogout:n}),Object(a.jsxs)("h1",{children:["Messages Page for bulding: ",t.building]}),Object(a.jsx)(K,{isMessagesPage:!0,filteredText:O,onFilterChange:function(e){return x(e.target.value)},priorityFilter:p,FilterPriority:function(e,t){"No Filter"===t.target.innerHTML?v(""):v(t.target.innerHTML)},Sort:function(e){"date"===e?U.sort((function(e,t){var n=Date.parse(e.date);return Date.parse(t.date)-n})):U.sort((function(e,t){var n=e.priority.toUpperCase(),a=t.priority.toUpperCase();return n<a?-1:n>a?1:0})),S(Object(E.a)(U))}}),Object(a.jsx)("div",{className:"b-new-message",style:{visibility:"committee"===t.role?"visible":"hidden"},children:Object(a.jsx)(N.a,{variant:"link",onClick:function(){return u(!0)},children:"New Message"})}),Object(a.jsx)(z,{panels:P,updateMessage:function(e,t){var n=I.a.Object.extend("Message");new I.a.Query(n).get(e).then((function(n){var a=n.get("isRead");a.includes(t)||a.push(t),n.set("isRead",a),n.save().then((function(n){var a=U.find((function(t){return t.id===e})),s=U.indexOf(a);U[s].isRead.push(t),S(Object(E.a)(U)),console.log("Updated Message Read status",n)}),(function(e){console.error("Error while updating Message",e)}))}))}}),Object(a.jsx)(F,{isUpdate:"false",show:d,handleClose:function(){return u(!1)},addMessage:function(e,t,n,a){return T.apply(this,arguments)}})]})};n(848);var $=function(e){var t=e.updateOptions,n=Object(s.useState)([]),c=Object(o.a)(n,2),r=c[0],i=c[1],l=Object(s.useState)(""),j=Object(o.a)(l,2),d=j[0],u=j[1],b=r.map((function(e){return Object(a.jsx)("div",{className:"option-added",children:Object(a.jsx)(L.a.Control,{type:"text",value:e})})}));return Object(a.jsxs)("div",{children:[b,Object(a.jsx)("div",{children:Object(a.jsx)(L.a.Control,{type:"text",placeholder:"New Option",value:d,onChange:function(e){return u(e.target.value)}})}),Object(a.jsx)("div",{className:"option-add-button",children:Object(a.jsx)(N.a,{onClick:function(){i(r.concat(d)),u(""),t(r.concat(d))},children:"Add Option"})})]})};var ee=function(e){var t=e.show,n=e.handleClose,c=e.addVote,r=Object(s.useState)(""),i=Object(o.a)(r,2),l=i[0],j=i[1],d=Object(s.useState)(""),u=Object(o.a)(d,2),O=u[0],x=u[1],m=Object(s.useState)([]),g=Object(o.a)(m,2),f=g[0],p=g[1],v=Object(s.useState)(new Date),C=Object(o.a)(v,2),w=C[0],y=C[1];function U(){j(""),x(""),p([]),y(""),n()}return Object(a.jsxs)(M.a,{show:t,onHide:U,size:"xl",children:[Object(a.jsx)(M.a.Header,{closeButton:!0,children:Object(a.jsx)(M.a.Title,{children:"New Vote"})}),Object(a.jsx)(M.a.Body,{children:Object(a.jsxs)(L.a,{children:[Object(a.jsxs)(L.a.Group,{as:b.a,controlId:"formHorizontalTitle",children:[Object(a.jsx)(L.a.Label,{column:!0,sm:2,children:"Title:"}),Object(a.jsx)(h.a,{sm:10,children:Object(a.jsx)(L.a.Control,{type:"text",placeholder:"Vote Title",value:l,onChange:function(e){return j(e.target.value)}})})]}),Object(a.jsxs)(L.a.Group,{as:b.a,controlId:"formHorizontalDetails",children:[Object(a.jsx)(L.a.Label,{column:!0,sm:2,children:"Details:"}),Object(a.jsx)(h.a,{sm:10,children:Object(a.jsx)(L.a.Control,{as:"textarea",rows:3,type:"text",placeholder:"Vote Details",value:O,onChange:function(e){return x(e.target.value)}})})]}),Object(a.jsxs)(L.a.Group,{as:b.a,controlId:"formHorizontalOptions",children:[Object(a.jsx)(L.a.Label,{column:!0,sm:2,children:"Options:"}),Object(a.jsx)(h.a,{sm:10,children:Object(a.jsx)($,{updateOptions:function(e){p(e)}})})]}),Object(a.jsxs)(L.a.Group,{as:b.a,controlId:"formHorizontalEndDate",children:[Object(a.jsx)(L.a.Label,{column:!0,sm:2,children:"End Date:"}),Object(a.jsx)(h.a,{sm:2,children:Object(a.jsx)(L.a.Control,{type:"date",onChange:function(e){return y(e.target.value)}})})]})]})}),Object(a.jsxs)(M.a.Footer,{children:[Object(a.jsx)(N.a,{variant:"secondary",onClick:U,children:"Cancel"}),Object(a.jsx)(N.a,{variant:"primary",onClick:function(){var e=new Date(w),t=JSON.stringify(e),n=JSON.parse(t);c(l,O,f,n),U()},children:"Create Vote"})]})]})};n(849);var te=function(e){var t=e.panels,n=e.isResaultAccordion;return Object(a.jsx)(V.a,{children:t.map((function(e,t){return Object(a.jsxs)(g.a,{children:[Object(a.jsx)(V.a.Toggle,{className:"accordionHeader",as:g.a.Header,eventKey:t.toString(),children:"true"===n?Object(a.jsxs)(b.a,{children:[Object(a.jsx)(h.a,{sm:9,className:"accordion-header-title",children:e.props.vote.title}),Object(a.jsx)(h.a,{sm:3,className:"accordion-header-result",children:"Result: "+e.props.vote.result})]}):Object(a.jsx)("div",{children:e.props.vote.title})}),Object(a.jsx)(V.a.Collapse,{eventKey:t.toString(),children:Object(a.jsx)(g.a.Body,{children:e})})]},t)}))})},ne=n(26),ae=ne.Modal,se=ne.Form,ce=ne.Button,re=ne.Col,ie=ne.Row;var oe=function(e){var t=e.show,n=e.handleClose,c=e.handleUpdateEndDate,r=Object(s.useState)(new Date),i=Object(o.a)(r,2),l=i[0],j=i[1];return Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)(ae,{size:"sm",show:t,onHide:n,"aria-labelledby":"example-modal-sizes-title-sm",children:[Object(a.jsx)(ae.Header,{closeButton:!0,children:Object(a.jsx)(ae.Title,{id:"example-modal-sizes-title-sm",children:"Small Modal"})}),Object(a.jsx)(ae.Body,{children:Object(a.jsxs)(se.Group,{as:ie,controlId:"formHorizontalEndDate",children:[Object(a.jsx)(se.Label,{column:!0,children:"Choose End Date:"}),Object(a.jsx)(re,{children:Object(a.jsx)(se.Control,{type:"date",value:l,onChange:function(e){return j(e.target.value)}})})]})}),Object(a.jsx)(ae.Footer,{children:Object(a.jsx)(ce,{variant:"primary",onClick:function(){var e=new Date(l),t=JSON.stringify(e),a=JSON.parse(t);c(a),n()},children:"Update End Date"})})]})})},le=n(463),je=n(464);n(944);var de=function(e){var t=e.title,n=e.vote,c=s.useMemo((function(){console.log("calculating chart data");var e,t=function(e){for(var t={pieColors:[],pieColorsBorder:[]},n=["rgba(255, 99, 132, ","rgba(54, 162, 235, ","rgba(10, 57, 173, ","rgba(10, 84, 48, ","rgba(2, 86, 86,","rgba(3, 29, 8, ","rgba(165, 85, 48, ","rgba(97, 232, 249, ","rgba(219, 186, 252, ","rgba(183, 220, 23, "],a=0;a<e;++a){var s=n[a%n.length]+"0.2)",c=n[a%n.length]+"1)";t.pieColors.push(s),t.pieColorsBorder.push(c)}return t}(n.options.length),a=[],s=Object(le.a)(n.options);try{for(s.s();!(e=s.n()).done;){for(var c=e.value,r=0,i=0,o=Object.values(n.votesPieData);i<o.length;i++){o[i]===c&&r++}a.push(r)}}catch(l){s.e(l)}finally{s.f()}return{labels:n.options,datasets:[{label:"# of Votes",data:a,backgroundColor:t.pieColors,borderColor:t.pieColorsBorder,borderWidth:1}]}}),[n]);return Object(a.jsxs)(u.a,{className:"chart-title",children:[Object(a.jsx)(g.a.Title,{children:t}),0===Object.keys(n.votesPieData).length?Object(a.jsx)("p",{style:{backgroundColor:"yellow"},children:"No Votes Yet"}):Object(a.jsx)(je.Pie,{options:{legend:{display:!1}},data:c})]})};n(945);var ue=function(e){var t=e.vote,n=e.activeUser,c=e.updateEndDate,r=e.AddUsersVote,i=Object(s.useState)(!1),l=Object(o.a)(i,2),j=l[0],d=l[1],O=Object(s.useState)(t.options[0]),x=Object(o.a)(O,2),m=x[0],g=x[1],f=0,p=t.endDate.substring(0,16);p=p.replace("T"," ");var v=t.options.map((function(e){return Object(a.jsx)("option",{children:e},f++)}));return Object(a.jsxs)("div",{className:"c-vote-card",children:["committee"===n.role?Object(a.jsx)(u.a,{fluid:!0,children:Object(a.jsxs)(b.a,{children:[Object(a.jsxs)(h.a,{children:[Object(a.jsx)(b.a,{children:Object(a.jsxs)("div",{className:"vote-details",children:[Object(a.jsx)("label",{children:"Details: "}),Object(a.jsx)("p",{children:t.details})]})}),Object(a.jsxs)(b.a,{children:[Object(a.jsxs)("div",{className:"vote-end-date",children:[Object(a.jsx)("label",{children:"End date: "}),Object(a.jsx)("p",{children:p})]}),Object(a.jsx)(N.a,{className:"b-update",variant:"warning",onClick:function(){return d(!0)},children:"Update End Date"})]})]}),Object(a.jsx)(h.a,{sm:6,children:Object(a.jsx)(de,{title:"Results",vote:t})})]})}):Object(a.jsx)(L.a,{children:Object(a.jsxs)(L.a.Group,{as:b.a,controlId:"formHorizontalVote"+f+t.title,children:[Object(a.jsx)(L.a.Label,{column:!0,sm:2,children:"Your Vote:"}),Object(a.jsxs)(h.a,{sm:10,children:[Object(a.jsx)(L.a.Control,{as:"select",onChange:function(e){return g(e.target.value)},children:v}),Object(a.jsxs)("div",{className:"vote-button",children:[Object(a.jsx)(N.a,{variant:"warning",onClick:function(){r(m,t.id,n.id)},children:"Submit Vote"}),Object(a.jsxs)("div",{className:"vote-end-date",children:[Object(a.jsx)("label",{children:"Vote end at: "}),Object(a.jsx)("p",{children:p})]})]})]})]})}),Object(a.jsx)(oe,{show:j,handleClose:function(){return d(!1)},handleUpdateEndDate:function(e){c(t.id,e)}})]})};n(946);var be=function(e){var t=e.vote,n=t.endDate.substring(0,16);return n=n.replace("T"," "),Object(a.jsx)("div",{className:"c-vote-card",children:Object(a.jsx)(u.a,{fluid:!0,children:Object(a.jsxs)(b.a,{children:[Object(a.jsxs)(h.a,{children:[Object(a.jsx)(b.a,{children:Object(a.jsxs)("div",{className:"vote-details",children:[Object(a.jsx)("label",{children:"Details: "}),Object(a.jsx)("p",{children:t.details})]})}),Object(a.jsx)(b.a,{children:Object(a.jsxs)("div",{className:"vote-end-date",children:[Object(a.jsx)("label",{children:"End date: "}),Object(a.jsx)("p",{children:n})]})})]}),Object(a.jsx)(h.a,{sm:4,children:Object(a.jsx)(de,{title:"Results",vote:t})}),Object(a.jsx)(h.a,{sm:4,children:Object(a.jsx)(de,{title:"Voting Precentage",vote:t})})]})})})},he=function e(t){Object(U.a)(this,e),this.id=t.id,this.title=t.get("title"),this.details=t.get("details"),this.options=t.get("options"),this.building=t.get("building"),this.endDate=t.get("endDate"),this.voteStatus=t.get("voteStatus"),this.result=t.get("result"),this.votesPieData=t.get("votesPieData")};var Oe=function(e){var t=e.activeUser,n=e.onLogout,c=Object(s.useState)(!1),r=Object(o.a)(c,2),i=r[0],l=r[1],d=Object(s.useState)(""),O=Object(o.a)(d,2),x=O[0],g=O[1],f=Object(s.useState)([]),p=Object(o.a)(f,2),v=p[0],y=p[1];function L(){return(L=Object(w.a)(C.a.mark((function e(t,n,a,s){var c,r,i;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=I.a.Object.extend("Vote"),(r=new c).set("title",t),r.set("details",n),r.set("building",I.a.User.current().attributes.building),r.set("options",a),r.set("voteStatus","active"),r.set("endDate",s),r.set("result",""),r.set("votesPieData",{}),r.relation("userId").add(I.a.User.current()),e.next=14,r.save();case 14:i=e.sent,y(v.concat(new he(i)));case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function U(e,t,n){var a=I.a.Object.extend("Vote");new I.a.Query(a).get(t).then((function(a){var s=a.get("votesPieData");s[n]=e,a.set("votesPieData",s),a.save().then((function(a){var s=v.find((function(e){return e.id===t})),c=v.indexOf(s);v[c].votesPieData[n]=e,y(Object(E.a)(v))}),(function(e){console.error("Error while updating Vote",e)}))}))}function S(e,t){var n=I.a.Object.extend("Vote");new I.a.Query(n).get(e).then((function(n){n.set("endDate",t),n.save().then((function(n){var a=v.find((function(t){return t.id===e})),s=v.indexOf(a);v[s].endDate=t,y(Object(E.a)(v))}),(function(e){console.error("Error while updating Vote",e)}))}))}if(Object(s.useEffect)((function(){function e(){return(e=Object(w.a)(C.a.mark((function e(){var t,n,a;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=I.a.Object.extend("Vote"),(n=new I.a.Query(t)).equalTo("userId",I.a.User.current()),e.next=5,n.find();case 5:a=e.sent,y(a.map((function(e){return new he(e)})));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}t&&function(){e.apply(this,arguments)}()}),[t,v]),v.forEach((function(e){var t=I.a.Object.extend("Vote");new I.a.Query(t).get(e.id).then((function(t){var n=new Date>=new Date(t.get("endDate"))?"not active":"active";t.set("voteStatus",n),t.save().then((function(t){e.voteStatus=n}),(function(e){console.error("Error while updating Vote",e)}))}))})),!t)return Object(a.jsx)(j.a,{to:"/"});var k=v.filter((function(e){return e.title.toLowerCase().includes(x.toLowerCase())||e.details.toLowerCase().includes(x.toLowerCase())})),T=v.filter((function(e){return"active"===e.voteStatus})).map((function(e){return Object(a.jsx)(ue,{vote:e,activeUser:t,updateEndDate:S,AddUsersVote:U})})),D=k.filter((function(e){return"active"!==e.voteStatus})).map((function(e){return Object(a.jsx)(be,{vote:e,activeUser:t})}));return Object(a.jsxs)("div",{className:"p-votes",children:[Object(a.jsx)(m,{activeUser:t,onLogout:n}),Object(a.jsx)(u.a,{fluid:!0,children:Object(a.jsxs)(b.a,{children:[Object(a.jsxs)(h.a,{className:"block-example border-right border-dark",children:[Object(a.jsx)("h1",{children:"Active Votings"}),Object(a.jsx)("div",{className:"b-new-vote",style:{visibility:"committee"===t.role?"visible":"hidden"},children:Object(a.jsx)(N.a,{variant:"link",onClick:function(){return l(!0)},children:"New Vote"})}),Object(a.jsx)(te,{panels:T,isResaultAccordion:"false"})]}),Object(a.jsxs)(h.a,{children:[Object(a.jsx)("h1",{children:"Voting Results"}),Object(a.jsx)(K,{isMessagesPage:!1,filteredText:x,onFilterChange:function(e){return g(e.target.value)}}),Object(a.jsx)(te,{panels:D,isResaultAccordion:"true"})]})]})}),Object(a.jsx)(ee,{show:i,handleClose:function(){return l(!1)},addVote:function(e,t,n,a){return L.apply(this,arguments)}})]})};var xe=function(e){var t=e.show,n=e.handleClose,c=e.addTenant,r=e.userId,i=e.tenants,l=e.isUpdate,j=e.updateTenantContent,d=Object(s.useState)("eyal@barak.com"),u=Object(o.a)(d,2),O=u[0],x=u[1],m=Object(s.useState)("123"),g=Object(o.a)(m,2),f=g[0],p=g[1],v=Object(s.useState)("Eyal"),C=Object(o.a)(v,2),w=C[0],y=C[1],U=Object(s.useState)("Barak"),k=Object(o.a)(U,2),T=k[0],D=k[1],E=Object(s.useState)("Einstein"),F=Object(o.a)(E,2),B=F[0],H=F[1],A=Object(s.useState)(""),G=Object(o.a)(A,2),R=G[0],V=G[1];function z(){x(""),p(""),y([]),D(""),H(""),V(""),n()}return Object(a.jsxs)(M.a,{show:t,onHide:z,size:"xl",children:[Object(a.jsx)(M.a.Header,{closeButton:!0,children:Object(a.jsx)(M.a.Title,{children:"Create a Committee Member Account"})}),Object(a.jsx)(M.a.Body,{children:Object(a.jsxs)(L.a,{children:[Object(a.jsxs)(L.a.Group,{controlId:"formBasicfname",children:[Object(a.jsx)(L.a.Label,{children:"First Name"}),Object(a.jsx)(L.a.Control,{type:"text",placeholder:"Enter first name",value:w,onChange:function(e){return y(e.target.value)}})]}),Object(a.jsxs)(L.a.Group,{controlId:"formBasiclname",children:[Object(a.jsx)(L.a.Label,{children:"Last Name"}),Object(a.jsx)(L.a.Control,{type:"text",placeholder:"Enter last name",value:T,onChange:function(e){return D(e.target.value)}})]}),Object(a.jsxs)(L.a.Group,{controlId:"formBasicEmail",children:[Object(a.jsx)(L.a.Label,{children:"Email address"}),Object(a.jsx)(L.a.Control,{type:"email",placeholder:"Enter email",value:O,onChange:function(e){return x(e.target.value)}}),Object(a.jsx)(L.a.Text,{className:"text-muted",children:"We'll never share your email with anyone else."})]}),Object(a.jsxs)(L.a.Group,{controlId:"formBasicPassword",children:[Object(a.jsx)(L.a.Label,{children:"Password"}),Object(a.jsx)(L.a.Control,{type:"password",placeholder:"Password",value:f,onChange:function(e){return p(e.target.value)}})]}),Object(a.jsxs)(L.a.Group,{controlId:"formHorizontalImage",children:[Object(a.jsx)(L.a.Label,{children:"Image URL"}),Object(a.jsxs)(b.a,{children:[Object(a.jsx)(h.a,{sm:10,children:Object(a.jsx)(L.a.Control,{type:"text",placeholder:"Image URL",value:R,onChange:function(e){return V(e.target.value)}})}),Object(a.jsx)(h.a,{sm:2,children:Object(a.jsx)(P.a,{width:"100",height:"100",src:""===R?"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQ4tJDcJYnlhTCuciLukYiHdpeS9XL5wGGHSg&usqp=CAU":R})})]})]}),Object(a.jsxs)(L.a.Group,{controlId:"formBasicbuilding",children:[Object(a.jsx)(L.a.Label,{children:"Building/Condomium Community Name"}),Object(a.jsx)(L.a.Control,{type:"text",placeholder:"Building/Condomium Community Name",value:B,onChange:function(e){return H(e.target.value)}})]})]})}),Object(a.jsx)("div",{children:"true"===l?Object(a.jsx)(M.a.Footer,{children:Object(a.jsx)(N.a,{variant:"primary",onClick:function(){j(w,T,O,B,f,R,r),z()},children:"Update Tenant"})}):Object(a.jsxs)(M.a.Footer,{children:[Object(a.jsx)(N.a,{variant:"secondary",onClick:z,children:"Cancel"}),Object(a.jsx)(N.a,{variant:"primary",onClick:function(){var e=new I.a.User;e.set("username",w),e.set("email",O),e.set("fname",w),e.set("lname",T),e.set("building",B),e.set("img",R),e.set("role","tenant"),e.set("password",f),e.set("emailAddrr",O);var t=I.a.User.current().get("sessionToken");e.signUp().then((function(e){var n=new I.a.ACL(e);n.setPublicWriteAccess(!0),n.setPublicReadAccess(!0),e.setACL(n),e.save(),I.a.User.become(t).then((function(e){}),(function(e){})),c(i.concat(new S(e))),console.log("User signed up",e)})).catch((function(e){console.error("Error while signing up user",e)})),z()},children:"Add Tenant"})]})})]})};n(947);var me=function(e){var t=e.tenant,n=e.removeTenant,c=e.updateTenantContent,r=Object(s.useState)(!1),i=Object(o.a)(r,2),l=i[0],j=i[1];return Object(a.jsxs)("div",{className:"c-tenant-card",children:[Object(a.jsx)(u.a,{fluid:!0,children:Object(a.jsxs)(b.a,{children:[Object(a.jsx)(h.a,{sm:10,children:Object(a.jsxs)(b.a,{children:[Object(a.jsx)(h.a,{sm:4,children:Object(a.jsx)("img",{alt:"tenantImg",className:"tenant-image",src:"undefined"===typeof t.img?"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQ4tJDcJYnlhTCuciLukYiHdpeS9XL5wGGHSg&usqp=CAU":t.img})}),Object(a.jsxs)(h.a,{sm:8,children:[Object(a.jsxs)("div",{className:"tenant-name",children:[Object(a.jsx)("label",{children:"Name: "}),Object(a.jsx)("p",{children:t.fname+" "+t.lname})]}),Object(a.jsxs)("div",{className:"tenant-email",children:[Object(a.jsx)("label",{children:"Email: "}),Object(a.jsx)("p",{children:t.email})]}),Object(a.jsxs)("div",{className:"tenant-building",children:[Object(a.jsx)("label",{children:"Building: "}),Object(a.jsx)("p",{children:t.building})]})]})]})}),Object(a.jsxs)(h.a,{className:"tenant-card-buttons",sm:2,children:[Object(a.jsx)(N.a,{className:"b-update-button",variant:"info",onClick:function(){return j(!0)},children:"Update"}),Object(a.jsx)(N.a,{onClick:function(){n(t.id)},className:"b-delete-button",variant:"danger",children:"Delete"})]})]})}),Object(a.jsx)(xe,{isUpdate:"true",show:l,handleClose:function(){return j(!1)},updateTenantContent:c,userId:t.id})]})};n(948),n(949);var ge=function(e){var t=e.panels;return Object(a.jsx)(V.a,{children:t.map((function(e,t){return Object(a.jsxs)(g.a,{children:[Object(a.jsx)(V.a.Toggle,{className:"accordionHeader",as:g.a.Header,eventKey:t.toString(),children:Object(a.jsx)("div",{children:e.props.tenant.fname+" "+e.props.tenant.lname})}),Object(a.jsx)(V.a.Collapse,{eventKey:t.toString(),children:Object(a.jsx)(g.a.Body,{children:e})})]},t)}))})};var fe=function(e){var t=e.activeUser,n=e.onLogout,c=Object(s.useState)(!1),r=Object(o.a)(c,2),i=r[0],l=r[1],d=Object(s.useState)(""),u=Object(o.a)(d,2),b=u[0],h=u[1],O=Object(s.useState)([]),x=Object(o.a)(O,2),g=x[0],f=x[1],p=g.filter((function(e){return e.fname.toLowerCase().includes(b.toLowerCase())||e.lname.toLowerCase().includes(b.toLowerCase())||e.email.toLowerCase().includes(b.toLowerCase())}));if(Object(s.useEffect)((function(){function e(){return(e=Object(w.a)(C.a.mark((function e(){var t,n,a;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=I.a.Object.extend("User"),(n=new I.a.Query(t)).equalTo("role","tenant"),e.next=5,n.find();case 5:a=e.sent,f(a.map((function(e){return new S(e)})));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}t&&function(){e.apply(this,arguments)}()}),[t]),!t)return Object(a.jsx)(j.a,{to:"/"});function v(e){var t=new I.a.User;new I.a.Query(t).get(e).then((function(t){t.destroy().then((function(t){var n=g.find((function(t){return t.id===e})),a=g.indexOf(n);g.splice(a,1),f(Object(E.a)(g)),console.log("Deleted user",t)}),(function(e){console.error("Error while deleting user",e)}))}))}function y(e,t,n,a,s,c,r){var i=new I.a.User;new I.a.Query(i).get(r).then((function(i){i.set("email",n),i.set("fname",e),i.set("lname",t),i.set("building",a),i.set("img",c),i.save().then((function(c){var i=g.find((function(e){return e.id===r})),o=g.indexOf(i);g[o].fname=e,g[o].lname=t,g[o].email=n,g[o].building=a,g[o].pwd=s,f(Object(E.a)(g)),console.log("Updated user",c)})).catch((function(e){console.error("Error while updating user",e)}))}))}var L=p.map((function(e){return Object(a.jsx)(me,{tenant:e,removeTenant:v,activeUser:t,updateTenantContent:y})}));return Object(a.jsxs)("div",{className:"p-messages",children:[Object(a.jsx)(m,{activeUser:t,onLogout:n}),Object(a.jsxs)("h1",{children:["Tenants Page for bulding: ",t.building]}),Object(a.jsx)(K,{isMessagesPage:!1,filteredText:b,onFilterChange:function(e){return h(e.target.value)}}),Object(a.jsx)("div",{className:"b-new-message",children:Object(a.jsx)(N.a,{variant:"link",onClick:function(){return l(!0)},children:"New Tenant"})}),Object(a.jsx)(ge,{panels:L}),Object(a.jsx)(xe,{isUpdate:"false",show:i,handleClose:function(){return l(!1)},tenants:g,addTenant:f})]})};var pe=function(){var e=Object(s.useState)(I.a.User.current()?new S(I.a.User.current()):null),t=Object(o.a)(e,2),n=t[0],c=t[1];function r(){c(null),I.a.User.logOut()}function i(e){c(e)}return Object(a.jsx)(l.a,{children:Object(a.jsxs)(j.d,{children:[Object(a.jsx)(j.b,{exact:!0,path:"/",children:Object(a.jsx)(p,{activeUser:n,onLogout:r})}),Object(a.jsx)(j.b,{exact:!0,path:"/login",children:Object(a.jsx)(T,{activeUser:n,onLogin:i})}),Object(a.jsx)(j.b,{exact:!0,path:"/signup",children:Object(a.jsx)(D,{activeUser:n,onLogin:i})}),Object(a.jsx)(j.b,{exact:!0,path:"/tenants",children:Object(a.jsx)(fe,{activeUser:n,onLogin:i,onLogout:r})}),Object(a.jsxs)(j.b,{exact:!0,path:"/messages",children:[" ",Object(a.jsx)(Z,{activeUser:n,onLogout:r})," "]}),Object(a.jsxs)(j.b,{exact:!0,path:"/voting",children:[" ",Object(a.jsx)(Oe,{activeUser:n,onLogout:r})]})]})})},ve=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,955)).then((function(t){var n=t.getCLS,a=t.getFID,s=t.getFCP,c=t.getLCP,r=t.getTTFB;n(e),a(e),s(e),c(e),r(e)}))};I.a.serverURL="https://parseapi.back4app.com",I.a.initialize("XtgiTRuyAyCslj3oa5cHUXxkGcLmjIzIMcJ708N9","n1adUT1XhcHQlK50lPrnNR0qzfzEpxZbZohWQuBX"),i.a.render(Object(a.jsx)(c.a.StrictMode,{children:Object(a.jsx)(pe,{})}),document.getElementById("root")),ve()}},[[950,1,2]]]);
//# sourceMappingURL=main.1f0504bf.chunk.js.map