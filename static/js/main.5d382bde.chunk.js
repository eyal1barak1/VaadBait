(this["webpackJsonpfinal-proj-vaad-bait"]=this["webpackJsonpfinal-proj-vaad-bait"]||[]).push([[0],{441:function(e,t,n){},442:function(e,t,n){},446:function(e,t,n){},447:function(e,t,n){},449:function(e,t,n){},682:function(e,t){},684:function(e,t){},695:function(e,t){},697:function(e,t){},722:function(e,t){},724:function(e,t){},725:function(e,t){},730:function(e,t){},732:function(e,t){},751:function(e,t){},763:function(e,t){},766:function(e,t){},810:function(e,t,n){},811:function(e,t,n){},812:function(e,t,n){},813:function(e,t,n){},814:function(e,t,n){},815:function(e,t,n){},816:function(e,t,n){},817:function(e,t,n){},818:function(e,t,n){},819:function(e,t,n){},914:function(e,t,n){},915:function(e,t,n){},916:function(e,t,n){},917:function(e,t,n){},918:function(e,t,n){},919:function(e,t,n){},920:function(e,t,n){},921:function(e,t,n){},922:function(e,t,n){"use strict";n.r(t);var a=n(1),s=n(0),c=n.n(s),r=n(58),i=n.n(r),o=(n(440),n(441),n(25)),l=n.n(o),j=n(49),d=n(9),u=n(76),b=n(28),h=(n(442),n(927)),O=n(928),m=n(929),g=n(425),x=n(936),f=n(937);var p=function(e){var t=e.activeUser,n=e.onLogout,s=null;return t&&"committee"===t.role&&(s=Object(a.jsx)(x.a.Link,{href:"#/tenants",children:"Tenants"})),Object(a.jsxs)(f.a,{bg:"light",expand:"lg",children:[Object(a.jsx)(f.a.Brand,{href:"#/",children:"HOA Systems"}),Object(a.jsx)(f.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(a.jsxs)(f.a.Collapse,{id:"basic-navbar-nav",children:[Object(a.jsxs)(x.a,{className:"mr-auto",children:[t?Object(a.jsx)(x.a.Link,{href:"#/messages",children:"Messages"}):null,t?Object(a.jsx)(x.a.Link,{href:"#/voting",children:"Voting"}):null,s]}),Object(a.jsxs)(x.a,{className:"ml-auto",children:[t?null:Object(a.jsx)(x.a.Link,{href:"#/login",children:"Login"}),t?null:Object(a.jsx)(x.a.Link,{href:"#/signup",children:"Signup"}),t?Object(a.jsx)(x.a.Link,{disabled:!0,children:"Hi "+t.fname+" "+t.lname+" :)"}):null,t?Object(a.jsx)(x.a.Link,{onClick:function(){return n()},children:"Logout"}):null]})]})]})},v=n(941);n(446);var C=function(e){var t=e.img,n=e.desc;return Object(a.jsxs)(v.a,{className:"c-home-page-card",children:[Object(a.jsx)(v.a.Header,{children:n}),Object(a.jsx)(v.a.Img,{variant:"top",src:t})]})};n(447);var w=function(e){var t=e.activeUser,n=e.onLogout;return Object(a.jsxs)("div",{className:"p-home",children:[Object(a.jsx)(p,{activeUser:t,onLogout:n}),Object(a.jsx)(h.a,{children:Object(a.jsxs)(O.a,{className:"homePageTitle",children:[Object(a.jsx)("h4",{children:"Welcome to HOA Management System"}),Object(a.jsx)("p",{children:"Take your Homeowner Association Management to the next level and get an easy UI for full transparency"})]})}),Object(a.jsx)(O.a,{className:"homePageCards",children:Object(a.jsxs)(m.a,{children:[Object(a.jsx)(g.a,{children:Object(a.jsx)(C,{img:"https://www.brandknewmag.com/wp-content/uploads/2018/11/advt-283.jpg",desc:"Full Transparency"})}),Object(a.jsx)(g.a,{children:Object(a.jsx)(C,{img:"https://thumbor.forbes.com/thumbor/960x0/https%3A%2F%2Fspecials-images.forbesimg.com%2Fdam%2Fimageserve%2F1063184564%2F960x0.jpg%3Ffit%3Dscale",desc:"Vote Online"})}),Object(a.jsx)(g.a,{children:Object(a.jsx)(C,{img:"https://images.squarespace-cdn.com/content/v1/527fb6bae4b04f95c720a907/1522090505822-63JM5RD7L5EQ9JE8RIFC/ke17ZwdGBToddI8pDm48kARgRj3gF56o5pPCLcgX83YUqsxRUqqbr1mOJYKfIPR7LoDQ9mXPOjoJoqy81S2I8N_N4V1vUb5AoIIIbLZhVYxCRW4BPu10St3TBAUQYVKcLhP6FrlsjHNVjgHYYFOnZY2fkf53yXnTjPV0F2ewkRAjGmv5qrb73FDOk_nyAWmN/glenn-carstens-peters-203007.jpg",desc:"Write a message"})})]})})]})},y=n(135),N=n(136),L=n(930),U=n(935),S=n(428),k=(n(449),n(57)),D=function e(t){Object(k.a)(this,e),this.id=t.id,this.fname=t.get("fname"),this.lname=t.get("lname"),this.email=t.get("emailAddrr"),this.role=t.get("role"),this.img="undefined"===typeof t.get("img")?"":t.get("img").url(),this.building=t.get("building")},I=n(10),T=n.n(I);var M=function(e){var t=Object(s.useState)("john@john.com"),n=Object(d.a)(t,2),c=n[0],r=n[1],i=Object(s.useState)("123"),o=Object(d.a)(i,2),h=o[0],m=o[1],g=Object(s.useState)(!1),x=Object(d.a)(g,2),f=x[0],p=x[1],v=Object(s.useState)(!1),C=Object(d.a)(v,2),w=C[0],k=C[1],I=e.onLogin;function M(){return(M=Object(j.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,T.a.User.logIn(c,h);case 3:t=e.sent,I(new D(t)),k(!0),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),console.error("Error while logging in user",e.t0),p(!0);case 12:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}return w?Object(a.jsx)(b.a,{to:"/messages"}):Object(a.jsxs)(O.a,{className:"p-login",children:[Object(a.jsxs)(u.b,{className:"goBackLink",to:"/",children:[Object(a.jsx)(y.a,{icon:N.a}),"Back"]}),Object(a.jsx)("h1",{children:"Login to HOA and make a difference"}),Object(a.jsxs)("p",{children:["or ",Object(a.jsx)(u.b,{to:"/signup",children:"create an account"})]}),f?Object(a.jsx)(L.a,{variant:"danger",children:"Invalid Credentials!"}):null,Object(a.jsxs)(U.a,{children:[Object(a.jsxs)(U.a.Group,{controlId:"formBasicEmail",children:[Object(a.jsx)(U.a.Label,{children:"Email address"}),Object(a.jsx)(U.a.Control,{type:"email",placeholder:"Enter email",value:c,onChange:function(e){return r(e.target.value)}}),Object(a.jsx)(U.a.Text,{className:"text-muted",children:"We'll never share your email with anyone else."})]}),Object(a.jsxs)(U.a.Group,{controlId:"formBasicPassword",children:[Object(a.jsx)(U.a.Label,{children:"Password"}),Object(a.jsx)(U.a.Control,{type:"password",placeholder:"Password",value:h,onChange:function(e){return m(e.target.value)}})]}),Object(a.jsx)(S.a,{variant:"success",type:"button",block:!0,onClick:function(){return M.apply(this,arguments)},children:"Login"})]})]})};n(810);var E=function(e){var t=Object(s.useState)("eyal@barak.com"),n=Object(d.a)(t,2),c=n[0],r=n[1],i=Object(s.useState)("123"),o=Object(d.a)(i,2),l=o[0],j=o[1],h=Object(s.useState)("Eyal"),m=Object(d.a)(h,2),g=m[0],x=m[1],f=Object(s.useState)("Barak"),p=Object(d.a)(f,2),v=p[0],C=p[1],w=Object(s.useState)("Einstein"),L=Object(d.a)(w,2),k=L[0],I=L[1],M=Object(s.useState)(!1),E=Object(d.a)(M,2),P=E[0],F=E[1],B=e.onLogin;return P?Object(a.jsx)(b.a,{to:"/messages"}):Object(a.jsxs)(O.a,{className:"p-signup",children:[Object(a.jsxs)(u.b,{className:"goBackLink",to:"/",children:[" ",Object(a.jsx)(y.a,{icon:N.a}),"Back"]}),Object(a.jsx)("h1",{children:"Create a Committee Member Account"}),Object(a.jsxs)(U.a,{children:[Object(a.jsxs)(U.a.Group,{controlId:"formBasicfname",children:[Object(a.jsx)(U.a.Label,{children:"First Name"}),Object(a.jsx)(U.a.Control,{type:"text",placeholder:"Enter first name",value:g,onChange:function(e){return x(e.target.value)}})]}),Object(a.jsxs)(U.a.Group,{controlId:"formBasiclname",children:[Object(a.jsx)(U.a.Label,{children:"Last Name"}),Object(a.jsx)(U.a.Control,{type:"text",placeholder:"Enter last name",value:v,onChange:function(e){return C(e.target.value)}})]}),Object(a.jsxs)(U.a.Group,{controlId:"formBasicEmail",children:[Object(a.jsx)(U.a.Label,{children:"Email address"}),Object(a.jsx)(U.a.Control,{type:"email",placeholder:"Enter email",value:c,onChange:function(e){return r(e.target.value)}}),Object(a.jsx)(U.a.Text,{className:"text-muted",children:"We'll never share your email with anyone else."})]}),Object(a.jsxs)(U.a.Group,{controlId:"formBasicPassword",children:[Object(a.jsx)(U.a.Label,{children:"Password"}),Object(a.jsx)(U.a.Control,{type:"password",placeholder:"Password",value:l,onChange:function(e){return j(e.target.value)}})]}),Object(a.jsxs)(U.a.Group,{controlId:"formBasicbuilding",children:[Object(a.jsx)(U.a.Label,{children:"Building/Condomium Community Name"}),Object(a.jsx)(U.a.Control,{type:"text",placeholder:"Building/Condomium Community Name",value:k,onChange:function(e){return I(e.target.value)}})]}),Object(a.jsx)(S.a,{variant:"warning",type:"button",block:!0,onClick:function(){(new T.a.ACL).setPublicReadAccess(!0);var e=new T.a.User;e.set("username",g),e.set("email",c),e.set("fname",g),e.set("lname",v),e.set("building",k),e.set("img",""),e.set("role","committee"),e.set("password",l),e.set("emailAddrr",c),e.signUp().then((function(e){B(new D(e)),F(!0)})).catch((function(t){console.error("Error while signing up user",e)}))},children:"SignUp"})]})]})},P=n(68),F=n(934),B=n(931);n(811);var H=function(e){var t=e.show,n=e.handleClose,c=e.addMessage,r=e.isUpdate,i=e.messageId,o=e.updateMessageContent,l=e.phImg,j=Object(s.useState)(""),u=Object(d.a)(j,2),b=u[0],h=u[1],O=Object(s.useState)(""),x=Object(d.a)(O,2),f=x[0],p=x[1],v=Object(s.useState)("Info"),C=Object(d.a)(v,2),w=C[0],y=C[1],N=Object(s.useState)(""),L=Object(d.a)(N,2),k=L[0],D=L[1],I="undefined"===typeof l?"":l.img.url();function T(){h(""),p(""),D(""),n()}var M=k?URL.createObjectURL(k):"";return Object(a.jsxs)(F.a,{show:t,onHide:T,size:"xl",children:[Object(a.jsx)(F.a.Header,{closeButton:!0,children:Object(a.jsx)(F.a.Title,{children:r?"Update Message":"Create New Message"})}),Object(a.jsx)(F.a.Body,{children:Object(a.jsxs)(U.a,{children:[Object(a.jsxs)(U.a.Group,{as:m.a,controlId:"formHorizontalTitle",children:[Object(a.jsx)(U.a.Label,{column:!0,sm:2,children:"Title:"}),Object(a.jsx)(g.a,{sm:10,children:Object(a.jsx)(U.a.Control,{type:"text",placeholder:"Message Title",value:b,onChange:function(e){return h(e.target.value)}})})]}),Object(a.jsxs)(U.a.Group,{as:m.a,controlId:"formHorizontalDetails",children:[Object(a.jsx)(U.a.Label,{column:!0,sm:2,children:"Details:"}),Object(a.jsx)(g.a,{sm:10,children:Object(a.jsx)(U.a.Control,{as:"textarea",rows:3,type:"text",placeholder:"Message Details",value:f,onChange:function(e){return p(e.target.value)}})})]}),Object(a.jsxs)(U.a.Group,{as:m.a,controlId:"formHorizontalPriority",children:[Object(a.jsx)(U.a.Label,{column:!0,sm:2,children:"Priority:"}),Object(a.jsx)(g.a,{sm:10,children:Object(a.jsxs)(U.a.Control,{as:"select",onChange:function(e){return y(e.target.value)},children:[Object(a.jsx)("option",{children:" Info"}),Object(a.jsx)("option",{children:"Important"})]})})]}),Object(a.jsxs)(U.a.Group,{as:m.a,controlId:"formHorizontalImage",children:[Object(a.jsx)(U.a.Label,{column:!0,sm:2,children:"Image URL:"}),Object(a.jsx)(g.a,{sm:5,children:Object(a.jsx)(U.a.Control,{className:"chooseFile",type:"file",accept:"image/*",onChange:function(e){1===e.target.files.length?D(e.target.files[0]):D(null)}})}),Object(a.jsx)(g.a,{sm:5,children:Object(a.jsx)(B.a,{width:"200",height:"200",src:""===M?I:M})})]})]})}),Object(a.jsx)("div",{children:r?Object(a.jsx)(F.a.Footer,{children:Object(a.jsx)(S.a,{variant:"primary",onClick:function(){o(b,f,w,k,i),T()},children:"Update Message"})}):Object(a.jsxs)(F.a.Footer,{children:[Object(a.jsx)(S.a,{variant:"secondary",onClick:T,children:"Cancel"}),Object(a.jsx)(S.a,{variant:"primary",onClick:function(){c(b,f,w,k),T()},children:"Create Message"})]})})]})};n(812);var V=function(e){var t=e.completed,n=e.text,c=e.fname,r=e.lname,i=e.img,o="form-check todoitem "+(t?"done":"undone"),l=Object(s.useState)(""),j=Object(d.a)(l,2),u=j[0],b=j[1];return Object(s.useEffect)((function(){u&&(u.classList.add("highlight"),setTimeout((function(e){e.classList.remove("highlight")}),500,u))}),[u]),Object(a.jsxs)("li",{className:o,ref:function(e){return b(e)},children:[Object(a.jsx)(B.a,{alt:"Avatar",width:"30",height:"30",roundedCircle:!0,src:i}),Object(a.jsx)("label",{className:"form-check-label",children:c+" "+r+": "+n})]})};n(813);var A=function(e){var t=e.items,n=e.activeUser;return Object(a.jsx)("ul",{className:"todolist",children:t.map((function(e){return Object(a.jsx)(V,{id:e.id,text:e.text,completed:e.done,activeUser:n,fname:e.userFname,lname:e.userLname,img:e.img},e.id)}))})},R=function e(t){Object(k.a)(this,e),this.id=t.id,this.text=t.get("text"),this.done=t.get("done"),this.userFname=t.get("userFname"),this.userLname=t.get("userLname"),this.img=t.get("img")};var G=function(e){var t=e.message,n=e.activeUser,c=Object(s.useState)(""),r=Object(d.a)(c,2),i=r[0],o=r[1],u=Object(s.useState)([]),b=Object(d.a)(u,2),h=b[0],O=b[1];return Object(s.useEffect)((function(){function e(){return(e=Object(j.a)(l.a.mark((function e(){var n,a,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=T.a.Object.extend("Comment"),(a=new T.a.Query(n)).equalTo("messageId",{__type:"Pointer",className:"Message",objectId:t.id}),e.next=5,a.find();case 5:s=e.sent,O(s.map((function(e){return new R(e)})));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}n&&function(){e.apply(this,arguments)}()}),[n,t]),Object(a.jsxs)("div",{children:[Object(a.jsx)("h3",{children:"Comments:"}),Object(a.jsx)("div",{children:Object(a.jsx)(A,{items:h,activeUser:n})}),Object(a.jsxs)("form",{children:[Object(a.jsx)("div",{children:Object(a.jsx)("input",{type:"text",placeholder:"Add Comment",className:"form-control",onChange:function(e){o(e.target.value)},value:i})}),Object(a.jsx)("div",{children:Object(a.jsx)("button",{className:"add-btn btn btn-primary",style:{visibility:"hidden"},onClick:function(e){var a=new(T.a.Object.extend("Comment"));a.set("text",i),a.set("done",!1),a.set("userFname",n.fname),a.set("userLname",n.lname),a.set("messageId",{__type:"Pointer",className:"Message",objectId:t.id}),a.set("img",n.img),a.save().then((function(){O(h.concat(new R(a))),o("")}),(function(e){console.error("Error while creating Comment: ",e)}))}})})]})]})};n(814);var z=function(e){var t=e.message,n=e.removeMessage,c=e.activeUser,r=e.updateMessageContent,i=Object(s.useState)(!1),o=Object(d.a)(i,2),l=o[0],j=o[1];return Object(a.jsxs)("div",{className:"c-message-card",children:[Object(a.jsx)(O.a,{fluid:!0,children:Object(a.jsxs)(m.a,{children:[Object(a.jsx)(g.a,{md:6,children:Object(a.jsxs)(m.a,{children:[Object(a.jsx)(g.a,{sm:5,children:Object(a.jsx)("img",{alt:"messageImg",className:"message-image",src:""===t.img?"https://cdn3.iconfinder.com/data/icons/ui-thick-outline-5-of-5/100/ui_09_of_10_-14-512.png":t.img})}),Object(a.jsxs)(g.a,{sm:7,children:[Object(a.jsxs)("div",{className:"message-details",children:[Object(a.jsx)("label",{children:"Details: "}),Object(a.jsx)("p",{children:t.details})]}),Object(a.jsxs)("div",{className:"message-priority",children:[Object(a.jsx)("label",{children:"Priority: "}),Object(a.jsx)("p",{children:t.priority})]})]})]})}),Object(a.jsx)(g.a,{md:4,children:Object(a.jsx)(G,{message:t,activeUser:c})}),Object(a.jsxs)(g.a,{style:{visibility:"committee"===c.role?"visible":"hidden"},className:"message-card-buttons",children:[Object(a.jsx)(S.a,{className:"b-update-button",variant:"info",onClick:function(){return j(!0)},children:"Update"}),Object(a.jsx)(S.a,{onClick:function(){n(t.id)},className:"b-delete-button",variant:"danger",children:"Delete"})]})]})}),Object(a.jsx)(H,{isUpdate:!0,show:l,handleClose:function(){return j(!1)},updateMessageContent:r,messageId:t.id})]})},Q=(n(815),n(938));n(816);var _=function(e){var t=e.panels,n=e.updateMessage;return Object(a.jsx)(Q.a,{variant:"success",children:t.map((function(e,t){return Object(a.jsxs)(v.a,{children:[Object(a.jsxs)(Q.a.Toggle,{className:"accordionHeader",onClick:function(){return t=e.props.message.id,a=e.props.activeUser.id,void n(t,a);var t,a},as:v.a.Header,eventKey:t.toString(),children:[e.props.message.title,Object(a.jsx)("img",{alt:"messageImg",className:"readImage",width:"20",height:"20",src:"undefined"!==typeof e.props.message.isRead&&e.props.message.isRead.includes(e.props.activeUser.id)?"https://icon-library.com/images/read-message-icon/read-message-icon-10.jpg":"https://cdn3.iconfinder.com/data/icons/mailing-2/96/notification_unread_mail_message_96-512.png"})]}),Object(a.jsx)(Q.a.Collapse,{eventKey:t.toString(),children:Object(a.jsx)(v.a.Body,{children:e})})]},t)}))})},q=n(932),Y=n(427),W=n(933),J=n(433);n(817);var K=function(e){var t=e.filteredText,n=e.onFilterChange,s=e.FilterPriority,c=e.Sort,r=e.isMessagesPage;return Object(a.jsxs)(O.a,{children:[Object(a.jsxs)(m.a,{children:[Object(a.jsx)(g.a,{md:r?6:12,children:Object(a.jsxs)(q.a,{size:"sm",className:"mb-3",onChange:function(e){return n(e)},value:t,children:[Object(a.jsx)(q.a.Prepend,{children:Object(a.jsx)(q.a.Text,{children:Object(a.jsx)(y.a,{icon:N.b})})}),Object(a.jsx)(Y.a,{placeholder:"Filter","aria-label":"Medium","aria-describedby":"inputGroup-sizing-sm"})]})}),r?Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(g.a,{children:Object(a.jsxs)(W.a,{onSelect:s,size:"sm",variant:"warning",id:"dropdown-basic-button",title:"Filter by Priority",children:[Object(a.jsx)(J.a.Item,{children:"No Filter"}),Object(a.jsx)(J.a.Item,{children:"Info"}),Object(a.jsx)(J.a.Item,{children:"Important"})]})}),Object(a.jsx)(g.a,{children:Object(a.jsxs)(U.a.Group,{onChange:function(e){return c(e.target.id)},className:"sort-radio",controlId:"formBasicCheckboxFirst",children:[Object(a.jsx)("div",{className:"sortByLabel",children:Object(a.jsx)(U.a.Label,{children:"Sort By:"})}),Object(a.jsx)(U.a.Check,{inline:!0,id:"date",type:"radio",label:"Date",name:"sort"}),Object(a.jsx)(U.a.Check,{inline:!0,id:"priority",type:"radio",label:"Priority",name:"sort"})]})})]}):null]}),r?Object(a.jsx)("br",{}):Object(a.jsx)(a.Fragment,{children:" "})]})},X=function e(t){Object(k.a)(this,e),this.id=t.id,this.title=t.get("title"),this.details=t.get("details"),this.priority=t.get("priority"),this.building=t.get("building"),this.isRead=t.get("isRead"),this.img=t.get("img").url(),this.date=t.get("date")};var Z=function(e){var t=e.activeUser,n=e.onLogout,c=e.message_items,r=e.addMessageItems,i=e.phImg,o=Object(s.useState)(!1),u=Object(d.a)(o,2),h=u[0],O=u[1],m=Object(s.useState)(""),g=Object(d.a)(m,2),x=g[0],f=g[1],v=Object(s.useState)(""),C=Object(d.a)(v,2),w=C[0],y=C[1],N=Object(s.useState)([]),L=Object(d.a)(N,2),U=L[0],k=L[1],D=U.filter((function(e){return e.title.toLowerCase().includes(x.toLowerCase())||e.details.toLowerCase().includes(x.toLowerCase())}));function I(){return(I=Object(j.a)(l.a.mark((function e(t,n,a,s){var c,r,o;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=T.a.Object.extend("Message"),(r=new c).set("title",t),r.set("details",n),s?r.set("img",new T.a.File(s.name,s)):r.set("img",i.img),r.set("priority",a),r.set("date",(new Date).toString()),r.set("isRead",[]),r.set("building",T.a.User.current().attributes.building),r.relation("userId").add(T.a.User.current()),e.next=13,r.save();case 13:o=e.sent,k(U.concat(new X(o)));case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function M(e){var t=T.a.Object.extend("Comment");new T.a.Query(t).get(e.id).then((function(e){e.destroy().then((function(){}),(function(e){console.error("Error while deleting Comment",e)}))}))}function E(e){var t=T.a.Object.extend("Message");new T.a.Query(t).get(e).then((function(t){t.destroy().then((function(t){var n=T.a.Object.extend("Comment"),a=new T.a.Query(n);a.equalTo("messageId",{__type:"Pointer",className:"Message",objectId:e}),a.find().then((function(e){e.forEach(M)}),(function(e){console.error("Error while fetching Comment",e)}));var s=U.find((function(t){return t.id===e})),c=U.indexOf(s);U.splice(c,1),k(Object(P.a)(U)),console.log("Deleted Message",t)}),(function(e){console.error("Error while deleting Message",e)}))}))}function F(e,t,n,a,s){var c=T.a.Object.extend("Message");new T.a.Query(c).get(s).then((function(c){c.set("title",e),c.set("details",t),c.set("priority",n),a?c.set("img",new T.a.File(a.name,a)):c.set("img",i.img),c.save().then((function(c){var r=U.find((function(e){return e.id===s})),i=U.indexOf(r);U[i].title=e,U[i].details=t,U[i].priority=n,U[i].img=""===a?a:c.get("img").url(),k(Object(P.a)(U)),console.log("Updated Message ",c)}),(function(e){console.error("Error while updating Message",e)}))}))}if(Object(s.useEffect)((function(){function e(){return(e=Object(j.a)(l.a.mark((function e(){var t,n,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=T.a.Object.extend("Message"),(n=new T.a.Query(t)).equalTo("building",T.a.User.current().attributes.building),e.next=5,n.find();case 5:a=e.sent,k(a.map((function(e){return new X(e)})));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}t&&function(){e.apply(this,arguments)}()}),[t]),!t)return Object(a.jsx)(b.a,{to:"/"});var B=(D=D.filter((function(e){return e.priority.toLowerCase().includes(w.toLowerCase())}))).map((function(e){return Object(a.jsx)(z,{message:e,message_items:c,addMessageItems:r,removeMessage:E,activeUser:t,updateMessageContent:F})}));return Object(a.jsxs)("div",{className:"p-messages",children:[Object(a.jsx)(p,{activeUser:t,onLogout:n}),Object(a.jsx)("div",{className:"PageHeader",children:Object(a.jsxs)("h1",{children:["Messages for bulding: ",t.building.toUpperCase()]})}),Object(a.jsx)(K,{isMessagesPage:!0,filteredText:x,onFilterChange:function(e){return f(e.target.value)},priorityFilter:w,FilterPriority:function(e,t){"No Filter"===t.target.innerHTML?y(""):y(t.target.innerHTML)},Sort:function(e){"date"===e?U.sort((function(e,t){var n=Date.parse(e.date);return Date.parse(t.date)-n})):U.sort((function(e,t){var n=e.priority.toUpperCase(),a=t.priority.toUpperCase();return n<a?-1:n>a?1:0})),k(Object(P.a)(U))}}),Object(a.jsx)("div",{className:"b-new-message",style:{visibility:"committee"===t.role?"visible":"hidden"},children:Object(a.jsx)(S.a,{variant:"link",onClick:function(){return O(!0)},children:"New Message"})}),Object(a.jsx)(_,{panels:B,updateMessage:function(e,t){var n=T.a.Object.extend("Message");new T.a.Query(n).get(e).then((function(n){var a=n.get("isRead");a.includes(t)||a.push(t),n.set("isRead",a),n.save().then((function(){var n=U.find((function(t){return t.id===e})),a=U.indexOf(n);U[a].isRead.push(t),k(Object(P.a)(U))}),(function(e){console.error("Error while updating Message",e)}))}))}}),h?Object(a.jsx)(H,{isUpdate:!1,show:h,handleClose:function(){return O(!1)},addMessage:function(e,t,n,a){return I.apply(this,arguments)},phImg:i}):null]})};n(818);var $=function(e){var t=e.updateOptions,n=Object(s.useState)([]),c=Object(d.a)(n,2),r=c[0],i=c[1],o=Object(s.useState)(""),l=Object(d.a)(o,2),j=l[0],u=l[1],b=r.map((function(e){return Object(a.jsx)("div",{className:"option-added",children:Object(a.jsx)(U.a.Control,{type:"text",value:e})},e)}));return Object(a.jsxs)("div",{children:[b,Object(a.jsx)("div",{children:Object(a.jsx)(U.a.Control,{type:"text",placeholder:"New Option",value:j,onChange:function(e){return u(e.target.value)}})}),Object(a.jsx)("div",{className:"option-add-button",children:Object(a.jsx)(S.a,{onClick:function(){i(r.concat(j)),u(""),t(r.concat(j))},children:"Add Option"})})]})};var ee=function(e){var t=e.show,n=e.handleClose,c=e.addVote,r=Object(s.useState)(""),i=Object(d.a)(r,2),o=i[0],l=i[1],j=Object(s.useState)(""),u=Object(d.a)(j,2),b=u[0],h=u[1],O=Object(s.useState)([]),x=Object(d.a)(O,2),f=x[0],p=x[1],v=Object(s.useState)(new Date),C=Object(d.a)(v,2),w=C[0],y=C[1];function N(){l(""),h(""),p([]),y(""),n()}return Object(a.jsxs)(F.a,{show:t,onHide:N,size:"xl",children:[Object(a.jsx)(F.a.Header,{closeButton:!0,children:Object(a.jsx)(F.a.Title,{children:"New Vote"})}),Object(a.jsx)(F.a.Body,{children:Object(a.jsxs)(U.a,{children:[Object(a.jsxs)(U.a.Group,{as:m.a,controlId:"formHorizontalTitle",children:[Object(a.jsx)(U.a.Label,{column:!0,sm:2,children:"Title:"}),Object(a.jsx)(g.a,{sm:10,children:Object(a.jsx)(U.a.Control,{type:"text",placeholder:"Vote Title",value:o,onChange:function(e){return l(e.target.value)}})})]}),Object(a.jsxs)(U.a.Group,{as:m.a,controlId:"formHorizontalDetails",children:[Object(a.jsx)(U.a.Label,{column:!0,sm:2,children:"Details:"}),Object(a.jsx)(g.a,{sm:10,children:Object(a.jsx)(U.a.Control,{as:"textarea",rows:3,type:"text",placeholder:"Vote Details",value:b,onChange:function(e){return h(e.target.value)}})})]}),Object(a.jsxs)(U.a.Group,{as:m.a,controlId:"formHorizontalOptions",children:[Object(a.jsx)(U.a.Label,{column:!0,sm:2,children:"Options:"}),Object(a.jsx)(g.a,{sm:10,children:Object(a.jsx)($,{updateOptions:function(e){p(e)}})})]}),Object(a.jsxs)(U.a.Group,{as:m.a,controlId:"formHorizontalEndDate",children:[Object(a.jsx)(U.a.Label,{column:!0,sm:2,children:"End Date:"}),Object(a.jsx)(g.a,{sm:2,children:Object(a.jsx)(U.a.Control,{type:"date",onChange:function(e){return y(e.target.value)}})})]})]})}),Object(a.jsxs)(F.a.Footer,{children:[Object(a.jsx)(S.a,{variant:"secondary",onClick:N,children:"Cancel"}),Object(a.jsx)(S.a,{variant:"primary",onClick:function(){var e=""===w?new Date:new Date(w);c(o,b,f,e),N()},children:"Create Vote"})]})]})};n(819);var te=function(e){var t=e.panels,n=e.isResaultAccordion;return Object(a.jsx)(Q.a,{children:t.map((function(e,t){return Object(a.jsxs)(v.a,{children:[Object(a.jsx)(Q.a.Toggle,{className:"accordionHeader",as:v.a.Header,eventKey:t.toString(),children:n?Object(a.jsxs)(m.a,{children:[Object(a.jsx)(g.a,{md:8,className:"accordion-header-title",children:e.props.vote.title}),Object(a.jsx)(g.a,{md:4,className:"accordion-header-result",children:"Result: "+e.props.vote.result})]}):Object(a.jsx)("div",{children:e.props.vote.title})}),Object(a.jsx)(Q.a.Collapse,{eventKey:t.toString(),children:Object(a.jsx)(v.a.Body,{children:e})})]},t)}))})},ne=n(940),ae=n(939);var se=function(e){var t=e.show,n=e.handleClose,c=e.handleUpdateEndDate,r=Object(s.useState)(new Date),i=Object(d.a)(r,2),o=i[0],l=i[1],j=Object(s.useState)(function(){var e=new Date,t=""+(e.getMonth()+1),n=""+e.getDate(),a=e.getFullYear();t.length<2&&(t="0"+t);n.length<2&&(n="0"+n);return[a,t,n].join("-")}()),u=Object(d.a)(j,2),b=u[0],h=u[1];return Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)(F.a,{size:"sm",show:t,onHide:n,"aria-labelledby":"example-modal-sizes-title-sm",children:[Object(a.jsx)(F.a.Header,{closeButton:!0,children:Object(a.jsx)(F.a.Title,{id:"example-modal-sizes-title-sm",children:"Pick A Date"})}),Object(a.jsx)(F.a.Body,{children:Object(a.jsxs)(U.a.Group,{as:m.a,controlId:"formHorizontalEndDate",children:[Object(a.jsx)(U.a.Label,{column:!0,children:"Choose End Date:"}),Object(a.jsx)(g.a,{children:Object(a.jsx)(U.a.Control,{type:"date",value:b,onChange:function(e){return t=e.target.value,l(t),void h(t);var t}})})]})}),Object(a.jsx)(F.a.Footer,{children:Object(a.jsx)(S.a,{variant:"primary",onClick:function(){var e="string"===typeof o?new Date(o):o;c(e),n()},children:"Update End Date"})})]})})},ce=n(429),re=n(430);n(914);var ie=function(e){var t=e.title,n=e.vote,c=s.useMemo((function(){var e,t=function(e){for(var t={pieColors:[],pieColorsBorder:[]},n=["rgba(255, 99, 132, ","rgba(54, 162, 235, ","rgba(10, 57, 173, ","rgba(10, 84, 48, ","rgba(2, 86, 86,","rgba(3, 29, 8, ","rgba(165, 85, 48, ","rgba(97, 232, 249, ","rgba(219, 186, 252, ","rgba(183, 220, 23, "],a=0;a<e;++a){var s=n[a%n.length]+"0.2)",c=n[a%n.length]+"1)";t.pieColors.push(s),t.pieColorsBorder.push(c)}return t}(n.options.length),a=[],s=Object(ce.a)(n.options);try{for(s.s();!(e=s.n()).done;){for(var c=e.value,r=0,i=0,o=Object.values(n.votesPieData);i<o.length;i++){o[i]===c&&r++}a.push(r)}}catch(l){s.e(l)}finally{s.f()}return{labels:n.options,datasets:[{label:"# of Votes",data:a,backgroundColor:t.pieColors,borderColor:t.pieColorsBorder,borderWidth:1}]}}),[n]);return Object(a.jsxs)(O.a,{className:"chart-title",children:[Object(a.jsx)(v.a.Title,{children:t}),0===Object.keys(n.votesPieData).length?Object(a.jsx)("p",{style:{backgroundColor:"yellow"},children:"No Votes Yet"}):Object(a.jsx)(re.Pie,{options:{legend:{display:!1}},data:c})]})},oe=(n(915),n(431)),le=n(434),je=n(432),de=(n(916),function(e){Object(le.a)(n,e);var t=Object(je.a)(n);function n(){var e;Object(k.a)(this,n);for(var a=arguments.length,s=new Array(a),c=0;c<a;c++)s[c]=arguments[c];return(e=t.call.apply(t,[this].concat(s))).state={endDate:e.props.endDate,days:0,hours:0,minutes:0,seconds:0,errorMsg:""},e.onEndDateChange=function(t){e.setState({endDate:t})},e.getTwoDigitValue=function(e){return e<10?"0"+e:""+e},e.calculateCountdown=function(){var t=new Date,n=e.state.endDate;if(e.setState({errorMsg:""}),n.getTime()-t.getTime()>0){var a=new Date(t),s=new Date(n),c=a.getTime(),r=s.getTime()/1e3-c/1e3,i=Math.floor(r/86400);r-=24*i*60*60;var o=Math.floor(r/3600);r-=60*o*60;var l=Math.floor(r/60);r-=60*l,i=Math.abs(i),o=Math.abs(o),l=Math.abs(l),r=Math.floor(Math.abs(r)),e.setState((function(){return{days:i,hours:o,minutes:l,seconds:r}}),(function(){e.timer=setTimeout(e.calculateCountdown,1e3)}))}else e.setState({errorMsg:"Times up!"}),clearTimeout(e.timer)},e}return Object(oe.a)(n,[{key:"componentDidMount",value:function(){this.calculateCountdown()}},{key:"componentWillUnmount",value:function(){clearTimeout(this.timer)}},{key:"render",value:function(){var e=this.state,t=e.days,n=e.hours,s=e.minutes,c=e.seconds,r=this.getTwoDigitValue(t),i=this.getTwoDigitValue(n),o=this.getTwoDigitValue(s),l=this.getTwoDigitValue(c);return Object(a.jsxs)(O.a,{className:"counter",children:[Object(a.jsxs)("div",{className:"time",children:[Object(a.jsx)("div",{className:"time-value",children:r}),Object(a.jsx)("div",{className:"time-label",children:"Days"})]}),Object(a.jsxs)("div",{className:"time",children:[Object(a.jsx)("div",{className:"time-value",children:i}),Object(a.jsx)("div",{className:"time-label",children:"Hours"})]}),Object(a.jsxs)("div",{className:"time",children:[Object(a.jsx)("div",{className:"time-value",children:o}),Object(a.jsx)("div",{className:"time-label",children:"Minutes"})]}),Object(a.jsxs)("div",{className:"time",children:[Object(a.jsx)("div",{className:"time-value",children:l}),Object(a.jsx)("div",{className:"time-label",children:"Seconds"})]})]})}}]),n}(c.a.Component));var ue=function(e){var t=e.vote,n=e.activeUser,c=e.updateEndDate,r=e.AddUsersVote,i=Object(s.useState)(!1),o=Object(d.a)(i,2),l=o[0],j=o[1],u=Object(s.useState)(t.options[0]),b=Object(d.a)(u,2),h=b[0],x=b[1],f=Object(s.useState)(!1),p=Object(d.a)(f,2),v=p[0],C=p[1],w=function(e){var t=new Date(e),n=""+(t.getMonth()+1),a=""+t.getDate(),s=t.getFullYear(),c=""+t.getHours(),r=""+t.getMinutes();n.length<2&&(n="0"+n);a.length<2&&(a="0"+a);c.length<2&&(c="0"+c);r.length<2&&(r="0"+r);return"".concat(a,"-").concat(n,"-").concat(s,"  ").concat(c,":").concat(r)}(t.endDate),y=t.options.map((function(e){return Object(a.jsx)("option",{children:e})})),N=Object(a.jsxs)(ne.a,{id:"popover-basic",children:[Object(a.jsx)(ne.a.Title,{as:"h3",children:"Thank you for your vote"}),Object(a.jsxs)(ne.a.Content,{children:["results will be available at ",Object(a.jsx)("strong",{children:w})]})]});return Object(a.jsxs)("div",{className:"c-vote-card",children:["committee"===n.role?Object(a.jsx)(O.a,{fluid:!0,children:Object(a.jsxs)(m.a,{children:[Object(a.jsxs)(g.a,{lg:7,children:[Object(a.jsx)(m.a,{children:Object(a.jsxs)("div",{className:"vote-details",children:[Object(a.jsx)("label",{children:"Details: "}),Object(a.jsx)("p",{children:t.details})]})}),Object(a.jsxs)(m.a,{children:[Object(a.jsxs)("div",{className:"vote-end-date",children:[Object(a.jsx)("label",{children:"End date: "}),Object(a.jsx)("p",{children:w})]}),Object(a.jsx)(S.a,{className:"b-update",variant:"warning",onClick:function(){return j(!0)},children:"Update End Date"})]})]}),Object(a.jsx)(g.a,{lg:5,children:Object(a.jsx)(ie,{title:"Results",vote:t})})]})}):Object(a.jsx)(U.a,{children:Object(a.jsxs)(O.a,{children:[Object(a.jsx)(U.a.Label,{children:"Your Vote:"}),Object(a.jsx)(U.a.Control,{as:"select",onChange:function(e){return x(e.target.value)},children:y}),Object(a.jsxs)("div",{className:"vote-button",children:[Object(a.jsx)(ae.a,{trigger:"click",placement:"right",show:v,overlay:N,children:Object(a.jsx)(S.a,{variant:"warning",onClick:function(){C(!0),setTimeout((function(){C(!1)}),2e3),r(h,t.id,n.id)},children:"Submit Vote"})}),Object(a.jsxs)("div",{className:"vote-end-date",children:[Object(a.jsx)("label",{children:"Vote ends in: "}),Object(a.jsx)(de,{endDate:new Date(t.endDate)}),Object(a.jsx)("label",{children:" Ends date: "}),Object(a.jsx)("p",{children:w})]})]})]})}),l?Object(a.jsx)(se,{show:l,handleClose:function(){return j(!1)},handleUpdateEndDate:function(e){c(t.id,e)}}):null]})};n(917);var be=function(e){var t=e.vote,n=function(e){var t=new Date(e),n=""+(t.getMonth()+1),a=""+t.getDate(),s=t.getFullYear(),c=""+t.getHours(),r=""+t.getMinutes();n.length<2&&(n="0"+n);a.length<2&&(a="0"+a);c.length<2&&(c="0"+c);r.length<2&&(r="0"+r);return"".concat(a,"-").concat(n,"-").concat(s,"  ").concat(c,":").concat(r)}(t.endDate);return Object(a.jsx)("div",{className:"c-vote-card",children:Object(a.jsxs)(O.a,{fluid:!0,children:[Object(a.jsxs)(g.a,{children:[Object(a.jsx)(m.a,{children:Object(a.jsxs)("div",{className:"vote-details",children:[Object(a.jsx)("label",{children:"Details:"}),Object(a.jsx)("p",{children:t.details})]})}),Object(a.jsx)(m.a,{children:Object(a.jsxs)("div",{className:"vote-end-date",children:[Object(a.jsx)("label",{children:"End date: "}),Object(a.jsx)("p",{children:n})]})})]}),Object(a.jsxs)(m.a,{children:[Object(a.jsx)(g.a,{children:Object(a.jsx)(ie,{title:"Results",vote:t})}),Object(a.jsx)(g.a,{children:Object(a.jsx)(ie,{title:"Voting Precentage",vote:t})})]})]})})},he=function e(t){Object(k.a)(this,e),this.id=t.id,this.title=t.get("title"),this.details=t.get("details"),this.options=t.get("options"),this.building=t.get("building"),this.endDate=t.get("voteEndDate").toString(),this.voteStatus=t.get("voteStatus"),this.result=t.get("result"),this.votesPieData=t.get("votesPieData")};var Oe=function(e){var t=e.activeUser,n=e.onLogout,c=Object(s.useState)(!1),r=Object(d.a)(c,2),i=r[0],o=r[1],u=Object(s.useState)(""),h=Object(d.a)(u,2),x=h[0],f=h[1],v=Object(s.useState)([]),C=Object(d.a)(v,2),w=C[0],y=C[1];function N(){return(N=Object(j.a)(l.a.mark((function e(t,n,a,s){var c,r,i;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=T.a.Object.extend("Vote"),(r=new c).set("title",t),r.set("details",n),r.set("building",T.a.User.current().attributes.building),r.set("options",a),r.set("voteStatus","active"),r.set("voteEndDate",s),r.set("result",""),r.set("votesPieData",{}),r.relation("userId").add(T.a.User.current()),e.next=14,r.save();case 14:i=e.sent,y(w.concat(new he(i)));case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function L(e,t,n){var a=T.a.Object.extend("Vote");new T.a.Query(a).get(t).then((function(a){var s=a.get("votesPieData");s[n]=e,a.set("votesPieData",s),a.save().then((function(a){var s=w.find((function(e){return e.id===t})),c=w.indexOf(s);w[c].votesPieData[n]=e,y(Object(P.a)(w))}),(function(e){console.error("Error while updating Vote",e)}))}))}function U(e,t){var n=T.a.Object.extend("Vote");new T.a.Query(n).get(e).then((function(n){n.set("voteEndDate",t),n.save().then((function(n){var a=w.find((function(t){return t.id===e})),s=w.indexOf(a);w[s].endDate=t.toString(),y(Object(P.a)(w))}),(function(e){console.error("Error while updating Vote",e)}))}))}if(Object(s.useEffect)((function(){function e(){return(e=Object(j.a)(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=T.a.Object.extend("Vote"),(n=new T.a.Query(t)).equalTo("building",T.a.User.current().attributes.building),e.next=5,n.find().then((function(e){y(e.map((function(e){return new he(e)})))}),(function(e){console.error("Error while fetching Vote",e)}));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}t&&function(){e.apply(this,arguments)}()}),[t,w]),w.forEach((function(e){var t=new Date>=new Date(e.endDate)?"not active":"active";if(t!==e.voteStatus){var n=T.a.Object.extend("Vote");new T.a.Query(n).get(e.id).then((function(n){var a=function(e){for(var t=[],n=0,a=Object.entries(e);n<a.length;n++){var s=Object(d.a)(a[n],2),c=s[0],r=s[1];t.push("".concat(r));var i="".concat(c);console.log("the vote for user id"+{userId:i}+" registerd")}var o=function(e){var t,n=[],a=[];e.sort();for(var s=0;s<e.length;s++)e[s]!==t?(n.push(e[s]),a.push(1)):a[a.length-1]++,t=e[s];return[n,a]}(t),l=function(e){if(0===e.length)return-1;for(var t=e[0],n=0,a=1;a<e.length;a++)e[a]>t&&(n=a,t=e[a]);return n}(o[1]);return function(e,t){for(var n=e[t],a=0,s=0;s<e.length;s++)e[s]===n&&++a;return a>1}(o[1],l)?"It's a Tie":o[0][l]}(n.get("votesPieData"));n.set("voteStatus",t),n.set("result",a),n.save().then((function(){e.voteStatus=t,e.results=a}),(function(e){console.error("Error while updating Vote",e)}))}))}})),!t)return Object(a.jsx)(b.a,{to:"/"});var k=w.filter((function(e){return e.title.toLowerCase().includes(x.toLowerCase())||e.details.toLowerCase().includes(x.toLowerCase())})),D=w.filter((function(e){return"active"===e.voteStatus})).map((function(e){return Object(a.jsx)(ue,{vote:e,activeUser:t,updateEndDate:U,AddUsersVote:L})})),I=k.filter((function(e){return"active"!==e.voteStatus})).map((function(e){return Object(a.jsx)(be,{vote:e,activeUser:t})}));return Object(a.jsxs)("div",{className:"p-votes",children:[Object(a.jsx)(p,{activeUser:t,onLogout:n}),Object(a.jsx)("div",{className:"PageHeader",children:Object(a.jsxs)("h1",{children:["Votings for bulding: ",t.building.toUpperCase()]})}),Object(a.jsx)(O.a,{fluid:!0,children:Object(a.jsxs)(m.a,{children:[Object(a.jsxs)(g.a,{md:6,children:[Object(a.jsx)("h1",{children:"Active Votings"}),Object(a.jsx)("div",{className:"b-new-vote",style:{visibility:"committee"===t.role?"visible":"hidden"},children:Object(a.jsx)(S.a,{variant:"link",onClick:function(){return o(!0)},children:"New Vote"})}),Object(a.jsx)(te,{panels:D,isResaultAccordion:!1})]}),Object(a.jsxs)(g.a,{md:6,children:[Object(a.jsx)("h1",{children:"Voting Results"}),Object(a.jsx)(K,{isMessagesPage:!1,filteredText:x,onFilterChange:function(e){return f(e.target.value)}}),Object(a.jsx)(te,{panels:I,isResaultAccordion:!0})]})]})}),i?Object(a.jsx)(ee,{show:i,handleClose:function(){return o(!1)},addVote:function(e,t,n,a){return N.apply(this,arguments)}}):null]})};n(918);var me=function(e){var t=e.show,n=e.handleClose,c=e.addTenant,r=e.userId,i=e.isUpdate,o=e.updateTenantContent,l=e.phImg,j=e.buildingName,u=Object(s.useState)("eyal@barak.com"),b=Object(d.a)(u,2),h=b[0],O=b[1],x=Object(s.useState)("123"),f=Object(d.a)(x,2),p=f[0],v=f[1],C=Object(s.useState)("Eyal"),w=Object(d.a)(C,2),y=w[0],N=w[1],L=Object(s.useState)("Barak"),k=Object(d.a)(L,2),D=k[0],I=k[1],T=Object(s.useState)(j),M=Object(d.a)(T,2),E=M[0],P=M[1],H=Object(s.useState)(""),V=Object(d.a)(H,2),A=V[0],R=V[1],G="undefined"===typeof l?"":l.img.url();function z(){O(""),v(""),N([]),I(""),P(""),R(""),n()}var Q=A?URL.createObjectURL(A):"";return Object(a.jsxs)(F.a,{show:t,onHide:z,size:"xl",children:[Object(a.jsx)(F.a.Header,{closeButton:!0,children:Object(a.jsxs)(F.a.Title,{children:[i?"Update Tenats Details":"Create New Tenant"," "]})}),Object(a.jsx)(F.a.Body,{children:Object(a.jsxs)(U.a,{children:[Object(a.jsxs)(U.a.Group,{as:m.a,controlId:"formBasicfname",children:[Object(a.jsx)(U.a.Label,{column:!0,sm:2,children:"First Name:"}),Object(a.jsx)(g.a,{sm:10,children:Object(a.jsx)(U.a.Control,{type:"text",placeholder:"Enter first name",value:y,onChange:function(e){return N(e.target.value)}})})]}),Object(a.jsxs)(U.a.Group,{as:m.a,controlId:"formBasiclname",children:[Object(a.jsx)(U.a.Label,{column:!0,sm:2,children:"Last Name:"}),Object(a.jsx)(g.a,{sm:10,children:Object(a.jsx)(U.a.Control,{type:"text",placeholder:"Enter last name",value:D,onChange:function(e){return I(e.target.value)}})})]}),Object(a.jsxs)(U.a.Group,{as:m.a,controlId:"formBasicEmail",children:[Object(a.jsx)(U.a.Label,{column:!0,sm:2,children:"Email address:"}),Object(a.jsxs)(g.a,{sm:10,children:[Object(a.jsx)(U.a.Control,{type:"email",placeholder:"Enter email",value:h,onChange:function(e){return O(e.target.value)}}),Object(a.jsx)(U.a.Text,{className:"text-muted",children:"We'll never share your email with anyone else."})]})]}),Object(a.jsxs)(U.a.Group,{as:m.a,controlId:"formBasicPassword",children:[Object(a.jsx)(U.a.Label,{column:!0,sm:2,children:"Password:"}),Object(a.jsx)(g.a,{sm:10,children:Object(a.jsx)(U.a.Control,{type:"password",placeholder:"Password",value:p,onChange:function(e){return v(e.target.value)}})})]}),Object(a.jsxs)(U.a.Group,{as:m.a,controlId:"formBasicbuilding",children:[Object(a.jsx)(U.a.Label,{column:!0,sm:2,children:"Building Name:"}),Object(a.jsx)(g.a,{sm:10,children:Object(a.jsx)(U.a.Control,{type:"text",placeholder:"Building/Condomium Community Name",value:E,onChange:function(e){return P(e.target.value)}})})]}),Object(a.jsxs)(U.a.Group,{as:m.a,controlId:"formHorizontalImage",children:[Object(a.jsx)(U.a.Label,{column:!0,sm:2,children:"Image URL:"}),Object(a.jsx)(g.a,{sm:5,children:Object(a.jsx)(U.a.Control,{className:"chooseFile",type:"file",accept:"image/*",onChange:function(e){1===e.target.files.length?R(e.target.files[0]):R(null)}})}),Object(a.jsx)(g.a,{sm:5,children:Object(a.jsx)(B.a,{width:"200",height:"200",src:""===Q?G:Q})})]})]})}),Object(a.jsx)("div",{children:i?Object(a.jsx)(F.a.Footer,{children:Object(a.jsx)(S.a,{variant:"primary",onClick:function(){o(y,D,h,E,p,A,r),z()},children:"Update Tenant"})}):Object(a.jsxs)(F.a.Footer,{children:[Object(a.jsx)(S.a,{variant:"secondary",onClick:z,children:"Cancel"}),Object(a.jsx)(S.a,{variant:"primary",onClick:function(){c(y,h,D,E,A,p),z()},children:"Add Tenant"})]})})]})};n(919);var ge=function(e){var t=e.tenant,n=e.removeTenant,c=e.updateTenantContent,r=Object(s.useState)(!1),i=Object(d.a)(r,2),o=i[0],l=i[1];return Object(a.jsxs)("div",{className:"c-tenant-card",children:[Object(a.jsx)(O.a,{fluid:!0,children:Object(a.jsxs)(m.a,{children:[Object(a.jsx)(g.a,{sm:10,children:Object(a.jsxs)(m.a,{children:[Object(a.jsx)(g.a,{sm:4,children:Object(a.jsx)("img",{alt:"tenantImg",className:"tenant-image",src:""===t.img?"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQ4tJDcJYnlhTCuciLukYiHdpeS9XL5wGGHSg&usqp=CAU":t.img})}),Object(a.jsxs)(g.a,{sm:8,children:[Object(a.jsxs)("div",{className:"tenant-name",children:[Object(a.jsx)("label",{children:"Name: "}),Object(a.jsx)("p",{children:t.fname+" "+t.lname})]}),Object(a.jsxs)("div",{className:"tenant-email",children:[Object(a.jsx)("label",{children:"Email: "}),Object(a.jsx)("p",{children:t.email})]}),Object(a.jsxs)("div",{className:"tenant-building",children:[Object(a.jsx)("label",{children:"Building: "}),Object(a.jsx)("p",{children:t.building})]})]})]})}),Object(a.jsxs)(g.a,{className:"tenant-card-buttons",sm:2,children:[Object(a.jsx)(S.a,{className:"b-update-button",variant:"info",onClick:function(){return l(!0)},children:"Update"}),Object(a.jsx)(S.a,{onClick:function(){n(t.id)},className:"b-delete-button",variant:"danger",children:"Delete"})]})]})}),o?Object(a.jsx)(me,{isUpdate:!0,show:o,handleClose:function(){return l(!1)},updateTenantContent:c,userId:t.id,buildingName:t.building}):null]})};n(920),n(921);var xe=function(e){var t=e.panels;return Object(a.jsx)(Q.a,{children:t.map((function(e,t){return Object(a.jsxs)(v.a,{children:[Object(a.jsx)(Q.a.Toggle,{className:"accordionHeader",as:v.a.Header,eventKey:t.toString(),children:Object(a.jsx)("div",{children:e.props.tenant.fname+" "+e.props.tenant.lname})}),Object(a.jsx)(Q.a.Collapse,{eventKey:t.toString(),children:Object(a.jsx)(v.a.Body,{children:e})})]},t)}))})};var fe=function(e){var t=e.activeUser,n=e.onLogout,c=e.phImg,r=Object(s.useState)(!1),i=Object(d.a)(r,2),o=i[0],u=i[1],h=Object(s.useState)(""),O=Object(d.a)(h,2),m=O[0],g=O[1],x=Object(s.useState)([]),f=Object(d.a)(x,2),v=f[0],C=f[1],w=v.filter((function(e){return e.fname.toLowerCase().includes(m.toLowerCase())||e.lname.toLowerCase().includes(m.toLowerCase())||e.email.toLowerCase().includes(m.toLowerCase())}));if(Object(s.useEffect)((function(){function e(){return(e=Object(j.a)(l.a.mark((function e(){var t,n,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=T.a.Object.extend("User"),(n=new T.a.Query(t)).equalTo("role","tenant"),e.next=5,n.find();case 5:a=e.sent,C(a.map((function(e){return new D(e)})));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}t&&function(){e.apply(this,arguments)}()}),[t]),!t)return Object(a.jsx)(b.a,{to:"/"});function y(e){var t=new T.a.User;new T.a.Query(t).get(e).then((function(t){t.destroy().then((function(t){var n=v.find((function(t){return t.id===e})),a=v.indexOf(n);v.splice(a,1),C(Object(P.a)(v)),console.log("Deleted user",t)}),(function(e){console.error("Error while deleting user",e)}))}))}function N(e,t,n,a,s,r,i){var o=new T.a.User;new T.a.Query(o).get(i).then((function(o){o.set("email",n),o.set("fname",e),o.set("lname",t),o.set("emailAddrr",n),o.set("building",a),r?o.set("img",new T.a.File(r.name,r)):o.set("img",c.img),o.save().then((function(c){var o=v.find((function(e){return e.id===i})),l=v.indexOf(o);v[l].fname=e,v[l].lname=t,v[l].email=n,v[l].building=a,v[l].pwd=s,v[l].img=""===r?r:c.get("img").url(),C(Object(P.a)(v)),console.log("Updated user",c)})).catch((function(e){console.error("Error while updating user",e)}))}))}var L=w.map((function(e){return Object(a.jsx)(ge,{tenant:e,removeTenant:y,activeUser:t,updateTenantContent:N})}));return Object(a.jsxs)("div",{className:"p-tenants",children:[Object(a.jsx)(p,{activeUser:t,onLogout:n}),Object(a.jsx)("div",{className:"PageHeader",children:Object(a.jsxs)("h1",{children:["Tenants for bulding: ",t.building.toUpperCase()]})}),Object(a.jsx)(K,{isMessagesPage:!1,filteredText:m,onFilterChange:function(e){return g(e.target.value)}}),Object(a.jsx)("div",{className:"b-new-tenants",children:Object(a.jsx)(S.a,{variant:"link",onClick:function(){return u(!0)},children:"New Tenant"})}),Object(a.jsx)(xe,{panels:L}),o?Object(a.jsx)(me,{isUpdate:!1,show:o,handleClose:function(){return u(!1)},addTenant:function(e,t,n,a,s,r){var i=new T.a.User;i.set("username",e),i.set("email",t),i.set("fname",e),i.set("lname",n),i.set("building",a),s?i.set("img",new T.a.File(s.name,s)):i.set("img",c.img),i.set("role","tenant"),i.set("password",r),i.set("emailAddrr",t);var o=T.a.User.current().get("sessionToken");i.signUp().then((function(e){var t=new T.a.ACL(e);t.setPublicWriteAccess(!0),t.setPublicReadAccess(!0),e.setACL(t),e.save(),T.a.User.become(o).then((function(e){}),(function(e){})),C(v.concat(new D(e))),console.log("User signed up",e)})).catch((function(e){console.error("Error while signing up user",e)}))},phImg:c,buildingName:t.building}):null]})},pe=function e(t){Object(k.a)(this,e),this.id=t.id,this.name=t.get("name"),this.img=t.get("img")};var ve=function(){var e=Object(s.useState)(T.a.User.current()?new D(T.a.User.current()):null),t=Object(d.a)(e,2),n=t[0],c=t[1],r=Object(s.useState)([]),i=Object(d.a)(r,2),o=i[0],h=i[1],O=f("messagePlaceholder"),m=f("userPlaceholder");function g(){c(null),T.a.User.logOut()}function x(e){c(e)}function f(e){return o.find((function(t){return t.name===e}))}return Object(s.useEffect)((function(){function e(){return(e=Object(j.a)(l.a.mark((function e(){var t,n,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=T.a.Object.extend("ImagePlaceHolder"),n=new T.a.Query(t),e.next=4,n.find();case 4:a=e.sent,h(a.map((function(e){return new pe(e)})));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),Object(a.jsx)(u.a,{children:Object(a.jsxs)(b.d,{children:[Object(a.jsx)(b.b,{exact:!0,path:"/",children:Object(a.jsx)(w,{activeUser:n,onLogout:g})}),Object(a.jsx)(b.b,{exact:!0,path:"/login",children:Object(a.jsx)(M,{activeUser:n,onLogin:x})}),Object(a.jsx)(b.b,{exact:!0,path:"/signup",children:Object(a.jsx)(E,{activeUser:n,onLogin:x})}),Object(a.jsx)(b.b,{exact:!0,path:"/tenants",children:Object(a.jsx)(fe,{activeUser:n,onLogout:g,phImg:m})}),Object(a.jsxs)(b.b,{exact:!0,path:"/messages",children:[" ",Object(a.jsx)(Z,{activeUser:n,onLogout:g,phImg:O})," "]}),Object(a.jsxs)(b.b,{exact:!0,path:"/voting",children:[" ",Object(a.jsx)(Oe,{activeUser:n,onLogout:g})]})]})})},Ce=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,942)).then((function(t){var n=t.getCLS,a=t.getFID,s=t.getFCP,c=t.getLCP,r=t.getTTFB;n(e),a(e),s(e),c(e),r(e)}))};T.a.serverURL="https://parseapi.back4app.com",T.a.initialize("XtgiTRuyAyCslj3oa5cHUXxkGcLmjIzIMcJ708N9","n1adUT1XhcHQlK50lPrnNR0qzfzEpxZbZohWQuBX"),i.a.render(Object(a.jsx)(c.a.StrictMode,{children:Object(a.jsx)(ve,{})}),document.getElementById("root")),Ce()}},[[922,1,2]]]);
//# sourceMappingURL=main.5d382bde.chunk.js.map