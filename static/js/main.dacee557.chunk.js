(this["webpackJsonpfinal-proj-vaad-bait"]=this["webpackJsonpfinal-proj-vaad-bait"]||[]).push([[0],{477:function(e,t,A){},478:function(e,t,A){},482:function(e,t,A){},483:function(e,t,A){},484:function(e,t,A){},717:function(e,t){},719:function(e,t){},730:function(e,t){},732:function(e,t){},758:function(e,t){},760:function(e,t){},761:function(e,t){},766:function(e,t){},768:function(e,t){},787:function(e,t){},799:function(e,t){},802:function(e,t){},846:function(e,t,A){},847:function(e,t,A){},848:function(e,t,A){},849:function(e,t,A){},850:function(e,t,A){},851:function(e,t,A){},852:function(e,t,A){},853:function(e,t,A){},854:function(e,t,A){},949:function(e,t,A){},950:function(e,t,A){},951:function(e,t,A){},952:function(e,t,A){},953:function(e,t,A){},954:function(e,t,A){},955:function(e,t,A){"use strict";A.r(t);var n=A(1),a=A(0),s=A.n(a),c=A(59),r=A.n(c),i=(A(476),A(477),A(10)),o=A(98),l=A(29),d=(A(478),A(313)),j=A(314),u=A(315),b=A(225),O=A(222),h=A(464);var g=function(e){var t=e.activeUser,A=e.onLogout,a=null;return t&&"committee"===t.role&&(a=Object(n.jsx)(O.a.Link,{href:"#/tenants",children:"Tenants"})),Object(n.jsxs)(h.a,{bg:"light",expand:"lg",children:[Object(n.jsx)(h.a.Brand,{href:"#/",children:"HOA Systems"}),Object(n.jsx)(h.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(n.jsxs)(h.a.Collapse,{id:"basic-navbar-nav",children:[Object(n.jsxs)(O.a,{className:"mr-auto",children:[t?Object(n.jsx)(O.a.Link,{href:"#/messages",children:"Messages"}):null,t?Object(n.jsx)(O.a.Link,{href:"#/voting",children:"Voting"}):null,a]}),Object(n.jsxs)(O.a,{className:"ml-auto",children:[t?null:Object(n.jsx)(O.a.Link,{href:"#/login",children:"Login"}),t?null:Object(n.jsx)(O.a.Link,{href:"#/signup",children:"Signup"}),t?Object(n.jsx)(O.a.Link,{disabled:!0,children:"Hi "+t.fname+" "+t.lname+" :)"}):null,t?Object(n.jsx)(O.a.Link,{onClick:function(){return A()},children:"Logout"}):null]})]})]})},x=A(312);A(482);var m=function(e){var t=e.img,A=e.desc;return Object(n.jsxs)(x.a,{className:"c-home-page-card",children:[Object(n.jsx)(x.a.Header,{children:A}),Object(n.jsx)(x.a.Img,{variant:"top",src:t})]})};A(483);var f=function(e){var t=e.activeUser,A=e.onLogout;return Object(n.jsxs)("div",{className:"p-home",children:[Object(n.jsx)(g,{activeUser:t,onLogout:A}),Object(n.jsx)(d.a,{children:Object(n.jsxs)(j.a,{className:"homePageTitle",children:[Object(n.jsx)("h4",{children:"Welcome to HOA Management System"}),Object(n.jsx)("p",{children:"Take your Homeowner Association Management to the next level and get an easy UI for full transparency"})]})}),Object(n.jsx)(j.a,{className:"homePageCards",children:Object(n.jsxs)(u.a,{children:[Object(n.jsx)(b.a,{children:Object(n.jsx)(m,{img:"https://www.brandknewmag.com/wp-content/uploads/2018/11/advt-283.jpg",desc:"Full Transparency"})}),Object(n.jsx)(b.a,{children:Object(n.jsx)(m,{img:"https://thumbor.forbes.com/thumbor/960x0/https%3A%2F%2Fspecials-images.forbesimg.com%2Fdam%2Fimageserve%2F1063184564%2F960x0.jpg%3Ffit%3Dscale",desc:"Vote Online"})}),Object(n.jsx)(b.a,{children:Object(n.jsx)(m,{img:"https://images.squarespace-cdn.com/content/v1/527fb6bae4b04f95c720a907/1522090505822-63JM5RD7L5EQ9JE8RIFC/ke17ZwdGBToddI8pDm48kARgRj3gF56o5pPCLcgX83YUqsxRUqqbr1mOJYKfIPR7LoDQ9mXPOjoJoqy81S2I8N_N4V1vUb5AoIIIbLZhVYxCRW4BPu10St3TBAUQYVKcLhP6FrlsjHNVjgHYYFOnZY2fkf53yXnTjPV0F2ewkRAjGmv5qrb73FDOk_nyAWmN/glenn-carstens-peters-203007.jpg",desc:"Write a message"})})]})})]})},v=A(35),p=A.n(v),C=A(60),w=A(442),y=A(465),L=A(102),N=(A(484),A(106)),D=function e(t){Object(N.a)(this,e),this.id=t.id,this.fname=t.get("fname"),this.lname=t.get("lname"),this.email=t.get("emailAddrr"),this.role=t.get("role"),this.img="undefined"===typeof t.get("img")?"":t.get("img").url(),this.building=t.get("building")},I=A(9),B=A.n(I);var H=function(e){var t=Object(a.useState)("john@john.com"),A=Object(i.a)(t,2),s=A[0],c=A[1],r=Object(a.useState)("123"),d=Object(i.a)(r,2),u=d[0],b=d[1],O=Object(a.useState)(!1),h=Object(i.a)(O,2),g=h[0],x=h[1],m=Object(a.useState)(!1),f=Object(i.a)(m,2),v=f[0],N=f[1],I=e.onLogin;function H(){return(H=Object(C.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,B.a.User.logIn(s,u);case 3:t=e.sent,I(new D(t)),N(!0),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),console.error("Error while logging in user",e.t0),x(!0);case 12:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}return v?Object(n.jsx)(l.a,{to:"/messages"}):Object(n.jsxs)(j.a,{className:"p-login",children:[Object(n.jsx)("h1",{children:"Login to HOA"}),Object(n.jsxs)("p",{children:["or ",Object(n.jsx)(o.b,{to:"/signup",children:"create an account"})]}),g?Object(n.jsx)(w.a,{variant:"danger",children:"Invalid Credentials!"}):null,Object(n.jsxs)(y.a,{children:[Object(n.jsxs)(y.a.Group,{controlId:"formBasicEmail",children:[Object(n.jsx)(y.a.Label,{children:"Email address"}),Object(n.jsx)(y.a.Control,{type:"email",placeholder:"Enter email",value:s,onChange:function(e){return c(e.target.value)}}),Object(n.jsx)(y.a.Text,{className:"text-muted",children:"We'll never share your email with anyone else."})]}),Object(n.jsxs)(y.a.Group,{controlId:"formBasicPassword",children:[Object(n.jsx)(y.a.Label,{children:"Password"}),Object(n.jsx)(y.a.Control,{type:"password",placeholder:"Password",value:u,onChange:function(e){return b(e.target.value)}})]}),Object(n.jsx)(L.a,{variant:"success",type:"button",block:!0,onClick:function(){return H.apply(this,arguments)},children:"Login"})]})]})};A(846);var k=function(e){var t=Object(a.useState)("eyal@barak.com"),A=Object(i.a)(t,2),s=A[0],c=A[1],r=Object(a.useState)("123"),o=Object(i.a)(r,2),d=o[0],u=o[1],b=Object(a.useState)("Eyal"),O=Object(i.a)(b,2),h=O[0],g=O[1],x=Object(a.useState)("Barak"),m=Object(i.a)(x,2),f=m[0],v=m[1],p=Object(a.useState)("Einstein"),C=Object(i.a)(p,2),w=C[0],N=C[1],I=Object(a.useState)(!1),H=Object(i.a)(I,2),k=H[0],P=H[1],E=e.onLogin;return k?Object(n.jsx)(l.a,{to:"/messages"}):Object(n.jsxs)(j.a,{children:[Object(n.jsx)("h1",{children:"Create a Committee Member Account"}),Object(n.jsx)("div",{className:"p-signup",children:Object(n.jsxs)(y.a,{children:[Object(n.jsxs)(y.a.Group,{controlId:"formBasicfname",children:[Object(n.jsx)(y.a.Label,{children:"First Name"}),Object(n.jsx)(y.a.Control,{type:"text",placeholder:"Enter first name",value:h,onChange:function(e){return g(e.target.value)}})]}),Object(n.jsxs)(y.a.Group,{controlId:"formBasiclname",children:[Object(n.jsx)(y.a.Label,{children:"Last Name"}),Object(n.jsx)(y.a.Control,{type:"text",placeholder:"Enter last name",value:f,onChange:function(e){return v(e.target.value)}})]}),Object(n.jsxs)(y.a.Group,{controlId:"formBasicEmail",children:[Object(n.jsx)(y.a.Label,{children:"Email address"}),Object(n.jsx)(y.a.Control,{type:"email",placeholder:"Enter email",value:s,onChange:function(e){return c(e.target.value)}}),Object(n.jsx)(y.a.Text,{className:"text-muted",children:"We'll never share your email with anyone else."})]}),Object(n.jsxs)(y.a.Group,{controlId:"formBasicPassword",children:[Object(n.jsx)(y.a.Label,{children:"Password"}),Object(n.jsx)(y.a.Control,{type:"password",placeholder:"Password",value:d,onChange:function(e){return u(e.target.value)}})]}),Object(n.jsxs)(y.a.Group,{controlId:"formBasicbuilding",children:[Object(n.jsx)(y.a.Label,{children:"Building/Condomium Community Name"}),Object(n.jsx)(y.a.Control,{type:"text",placeholder:"Building/Condomium Community Name",value:w,onChange:function(e){return N(e.target.value)}})]}),Object(n.jsx)(L.a,{variant:"warning",type:"button",block:!0,onClick:function(){(new B.a.ACL).setPublicReadAccess(!0);var e=new B.a.User;e.set("username",h),e.set("email",s),e.set("fname",h),e.set("lname",f),e.set("building",w),e.set("img",""),e.set("role","committee"),e.set("password",d),e.set("emailAddrr",s),e.signUp().then((function(e){E(new D(e)),P(!0)})).catch((function(t){console.error("Error while signing up user",e)}))},children:"SignUp"})]})})]})},P=A(71),E=A(463),U=A(180);var T=function(e){var t=e.show,A=e.handleClose,s=e.addMessage,c=e.isUpdate,r=e.messageId,o=e.updateMessageContent,l=Object(a.useState)(""),d=Object(i.a)(l,2),j=d[0],O=d[1],h=Object(a.useState)(""),g=Object(i.a)(h,2),x=g[0],m=g[1],f=Object(a.useState)("Info"),v=Object(i.a)(f,2),p=v[0],C=v[1],w=Object(a.useState)(""),N=Object(i.a)(w,2),D=N[0],I=N[1];function B(){O(""),m(""),I(""),A()}var H=D?URL.createObjectURL(D):"";return Object(n.jsxs)(E.a,{show:t,onHide:B,size:"xl",children:[Object(n.jsx)(E.a.Header,{closeButton:!0,children:Object(n.jsx)(E.a.Title,{children:"New Message"})}),Object(n.jsx)(E.a.Body,{children:Object(n.jsxs)(y.a,{children:[Object(n.jsxs)(y.a.Group,{as:u.a,controlId:"formHorizontalTitle",children:[Object(n.jsx)(y.a.Label,{column:!0,sm:2,children:"Title:"}),Object(n.jsx)(b.a,{sm:10,children:Object(n.jsx)(y.a.Control,{type:"text",placeholder:"Message Title",value:j,onChange:function(e){return O(e.target.value)}})})]}),Object(n.jsxs)(y.a.Group,{as:u.a,controlId:"formHorizontalDetails",children:[Object(n.jsx)(y.a.Label,{column:!0,sm:2,children:"Details:"}),Object(n.jsx)(b.a,{sm:10,children:Object(n.jsx)(y.a.Control,{as:"textarea",rows:3,type:"text",placeholder:"Message Details",value:x,onChange:function(e){return m(e.target.value)}})})]}),Object(n.jsxs)(y.a.Group,{as:u.a,controlId:"formHorizontalPriority",children:[Object(n.jsx)(y.a.Label,{column:!0,sm:2,children:"Priority:"}),Object(n.jsx)(b.a,{sm:10,children:Object(n.jsxs)(y.a.Control,{as:"select",onChange:function(e){return C(e.target.value)},children:[Object(n.jsx)("option",{children:" Info"}),Object(n.jsx)("option",{children:"Important"})]})})]}),Object(n.jsxs)(y.a.Group,{as:u.a,controlId:"formHorizontalImage",children:[Object(n.jsx)(y.a.Label,{column:!0,sm:2,children:"Image URL:"}),Object(n.jsx)(b.a,{sm:5,children:Object(n.jsx)(y.a.Control,{type:"file",accept:"image/*",onChange:function(e){1===e.target.files.length?I(e.target.files[0]):I(null)}})}),Object(n.jsx)(b.a,{sm:5,children:Object(n.jsx)(U.a,{width:"200",height:"200",src:""===H?"https://www.arde.co.il/wp-content/uploads/2014/06/default-placeholder.png":H})})]})]})}),Object(n.jsx)("div",{children:"true"===c?Object(n.jsx)(E.a.Footer,{children:Object(n.jsx)(L.a,{variant:"primary",onClick:function(){o(j,x,p,D,r),B()},children:"Update Message"})}):Object(n.jsxs)(E.a.Footer,{children:[Object(n.jsx)(L.a,{variant:"secondary",onClick:B,children:"Cancel"}),Object(n.jsx)(L.a,{variant:"primary",onClick:function(){s(j,x,p,D),B()},children:"Create Message"})]})})]})};A(847);var S=function(e){var t=e.completed,A=e.text,s=e.fname,c=e.lname,r=e.img,o="form-check todoitem "+(t?"done":"undone"),l=Object(a.useState)(""),d=Object(i.a)(l,2),j=d[0],u=d[1];return Object(a.useEffect)((function(){j&&(j.classList.add("highlight"),setTimeout((function(e){e.classList.remove("highlight")}),500,j))}),[j]),Object(n.jsxs)("li",{className:o,ref:function(e){return u(e)},children:[Object(n.jsx)(U.a,{alt:"Avatar",width:"30",height:"30",roundedCircle:!0,src:r}),Object(n.jsx)("label",{className:"form-check-label",children:s+" "+c+": "+A})]})};A(848);var z=function(e){var t=e.items,A=e.activeUser;return Object(n.jsx)("ul",{className:"todolist",children:t.map((function(e){return Object(n.jsx)(S,{id:e.id,text:e.text,completed:e.done,activeUser:A,fname:e.userFname,lname:e.userLname,img:e.img},e.id)}))})},M=function e(t){Object(N.a)(this,e),this.id=t.id,this.text=t.get("text"),this.done=t.get("done"),this.userFname=t.get("userFname"),this.userLname=t.get("userLname"),this.img=t.get("img")};var F=function(e){var t=e.message,A=e.activeUser,s=Object(a.useState)(""),c=Object(i.a)(s,2),r=c[0],o=c[1],l=Object(a.useState)([]),d=Object(i.a)(l,2),j=d[0],u=d[1];return Object(a.useEffect)((function(){function e(){return(e=Object(C.a)(p.a.mark((function e(){var A,n,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return A=B.a.Object.extend("Comment"),(n=new B.a.Query(A)).equalTo("messageId",{__type:"Pointer",className:"Message",objectId:t.id}),e.next=5,n.find();case 5:a=e.sent,u(a.map((function(e){return new M(e)})));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}A&&function(){e.apply(this,arguments)}()}),[A,t]),Object(n.jsxs)("div",{children:[Object(n.jsx)("h3",{children:"Comments:"}),Object(n.jsx)("div",{children:Object(n.jsx)(z,{items:j,activeUser:A})}),Object(n.jsxs)("form",{children:[Object(n.jsx)("div",{children:Object(n.jsx)("input",{type:"text",placeholder:"Add Comment",className:"form-control",onChange:function(e){o(e.target.value)},value:r})}),Object(n.jsx)("div",{children:Object(n.jsx)("button",{className:"add-btn btn btn-primary",style:{visibility:"hidden"},onClick:function(e){var n=new(B.a.Object.extend("Comment"));n.set("text",r),n.set("done",!1),n.set("userFname",A.fname),n.set("userLname",A.lname),n.set("messageId",{__type:"Pointer",className:"Message",objectId:t.id}),n.set("img",A.img),n.save().then((function(e){u(j.concat(new M(n))),o(""),console.log("Comment created",e)}),(function(e){console.error("Error while creating Comment: ",e)}))}})})]})]})};A(849);var Q=function(e){var t=e.message,A=e.removeMessage,s=e.activeUser,c=e.updateMessageContent,r=Object(a.useState)(!1),o=Object(i.a)(r,2),l=o[0],d=o[1];return Object(n.jsxs)("div",{className:"c-message-card",children:[Object(n.jsx)(j.a,{fluid:!0,children:Object(n.jsxs)(u.a,{children:[Object(n.jsx)(b.a,{sm:6,children:Object(n.jsxs)(u.a,{children:[Object(n.jsx)(b.a,{sm:5,children:Object(n.jsx)("img",{alt:"messageImg",className:"message-image",src:""===t.img?"https://cdn3.iconfinder.com/data/icons/ui-thick-outline-5-of-5/100/ui_09_of_10_-14-512.png":t.img})}),Object(n.jsxs)(b.a,{sm:7,children:[Object(n.jsxs)("div",{className:"message-details",children:[Object(n.jsx)("label",{children:"Details: "}),Object(n.jsx)("p",{children:t.details})]}),Object(n.jsxs)("div",{className:"message-priority",children:[Object(n.jsx)("label",{children:"Priority: "}),Object(n.jsx)("p",{children:t.priority})]})]})]})}),Object(n.jsx)(b.a,{sm:4,children:Object(n.jsx)(F,{message:t,activeUser:s})}),Object(n.jsxs)(b.a,{style:{visibility:"committee"===s.role?"visible":"hidden"},className:"message-card-buttons",children:[Object(n.jsx)(L.a,{className:"b-update-button",variant:"info",onClick:function(){return d(!0)},children:"Update"}),Object(n.jsx)(L.a,{onClick:function(){A(t.id)},className:"b-delete-button",variant:"danger",children:"Delete"})]})]})}),Object(n.jsx)(T,{isUpdate:"true",show:l,handleClose:function(){return d(!1)},updateMessageContent:c,messageId:t.id})]})},R=(A(850),A(443));A(851);var X=function(e){var t=e.panels,A=e.updateMessage;return Object(n.jsx)(R.a,{variant:"success",children:t.map((function(e,t){return Object(n.jsxs)(x.a,{children:[Object(n.jsxs)(R.a.Toggle,{className:"accordionHeader",onClick:function(){return t=e.props.message.id,n=e.props.activeUser.id,void A(t,n);var t,n},as:x.a.Header,eventKey:t.toString(),children:[e.props.message.title,Object(n.jsx)("img",{alt:"messageImg",className:"readImage",width:"20",height:"20",src:"undefined"!==typeof e.props.message.isRead&&e.props.message.isRead.includes(e.props.activeUser.id)?"https://icon-library.com/images/read-message-icon/read-message-icon-10.jpg":"https://cdn3.iconfinder.com/data/icons/mailing-2/96/notification_unread_mail_message_96-512.png"})]}),Object(n.jsx)(R.a.Collapse,{eventKey:t.toString(),children:Object(n.jsx)(x.a.Body,{children:e})})]},t)}))})},V=A(467),G=A(468),Z=A(444),q=A(227),J=A(445),K=A(46);A(852);var W=function(e){var t=e.filteredText,A=e.onFilterChange,a=e.FilterPriority,s=e.Sort,c=e.isMessagesPage;return Object(n.jsxs)(j.a,{children:[Object(n.jsxs)(u.a,{children:[Object(n.jsx)(b.a,{xs:c?7:12,children:Object(n.jsxs)(Z.a,{size:"sm",className:"mb-3",onChange:function(e){return A(e)},value:t,children:[Object(n.jsx)(Z.a.Prepend,{children:Object(n.jsx)(Z.a.Text,{children:Object(n.jsx)(V.a,{icon:G.a})})}),Object(n.jsx)(q.a,{placeholder:"Filter","aria-label":"Medium","aria-describedby":"inputGroup-sizing-sm"})]})}),c?Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(b.a,{children:Object(n.jsxs)(J.a,{onSelect:a,size:"sm",variant:"warning",id:"dropdown-basic-button",title:"Filter by Priority",children:[Object(n.jsx)(K.a.Item,{children:"No Filter"}),Object(n.jsx)(K.a.Item,{children:"Info"}),Object(n.jsx)(K.a.Item,{children:"Important"})]})}),Object(n.jsx)(b.a,{children:Object(n.jsxs)(y.a.Group,{onChange:function(e){return s(e.target.id)},className:"sort-radio",controlId:"formBasicCheckboxFirst",children:[Object(n.jsx)("div",{className:"sortByLabel",children:Object(n.jsx)(y.a.Label,{children:"Sort By:"})}),Object(n.jsx)(y.a.Check,{inline:!0,id:"date",type:"radio",label:"Date",name:"sort"}),Object(n.jsx)(y.a.Check,{inline:!0,id:"priority",type:"radio",label:"Priority",name:"sort"})]})})]}):null]}),c?Object(n.jsx)("br",{}):Object(n.jsx)(n.Fragment,{children:" "})]})},Y=function e(t){Object(N.a)(this,e),this.id=t.id,this.title=t.get("title"),this.details=t.get("details"),this.priority=t.get("priority"),this.building=t.get("building"),this.isRead=t.get("isRead"),this.img=t.get("img").url(),this.date=t.get("date")},_="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAABdwAAAXcCAMAAAAP67xWAAABAlBMVEXp7vG6vsHGy83m6+7b4OO7v8Lo7fDJzdDO0tW/w8bj6OvM0dTn7O+9wcS8wMPHy87k6ezg5ejZ3uHP1Nfb3+LN0dTKztHLz9Li5+rd4uXQ1Nfa3+LEyMvk6evl6u3FyczR1tm+wsXJztHX3N/AxMfGys3R1djBxcjh5unQ1djO09bM0NPCxsnP09bDx8rIzM/d4eTX297Y3N+/xMfe4uXGy87W2t3T2NvV2dzZ3eDU2dzc4eTKz9Lm6u3Axcjh5ejY3eDS1tnS19rHzM/W297L0NPU2Nva3uHe4+bf4+bV2t3i5unc4OPN0tXBxsnT19rf5OfEyczDyMvY3d/IzdDFys1FgAw6AAAV6klEQVR4XuzAMQEAAAzDoPlXvTsGesEFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAwAAAAAAAAAAAAAAAAAAAAAPLt2sNNEGEZh+PscOrVNB6lpkVRTqpKQEChEqsFNURcqLrj/y9EFKrBy6fz/81zEWbw5zebH2fl61GXP0W1f7S/eTduoHTCZPT3NsjA4XH1vo1rA5ONwkEWim2+iSsDBWZcF4/hrE7UBpvtZOnYXy6gJMH6RNWB3NYlaAO1qkJVg9DzqANzcZkUY7kX5gPZz1oXXsygdsHyf1WHRRtGA66OsEM+aKBhw0WWVOC04vAM7g6wUR+MoFLCT9WJU6LoDF4OsGNsiywxw3WXVWE+iOMDyMivHMEoDtE9sG1+iMMAqITdRFOAmIXPUREGA9jh/gXn8xwBRBmEGGN893GHdRimA/bwDb6MQwDR/g8tJlAF4k3/AhygCcJB/wbaNEgAneQ/MogDApMt74DwKAHzKB2Av+g84zwfgKnoPaAb5ABxG7wEv8xFoou+AeT4C36LvgNt8BE6i54Bl/rOf7MAxEQAACALAw80Ujmx0oX8ZK7h6x3PqsXDjSsve3e00EQYBGJ4Bdm2BYpcSSiLFkGKB6IEn9S8hMfHn/i9JjzVmv1IP9ts8zz3Mm8ycTFQOeF9a9g/zqBwPj7Ms0rRRN+BTFnlsYwSYv8wiD1E3YJIlvsc40C6zxKuoG/AtC2xiLGhfZ4EvUTfgXfa7b2M0uGqy3yLqBkwdZf7m79bbqBvQZL+bGBHOs9+LqBuQ/e5jTJhnv4OoGtBmvzcxJrTjjztwaNBta+IO4o64A+KOuAPijrgD4o64A+KOuPcAcUfcAXFH3AFxR9wBcUfcAXEvIe6AuCPugLgj7oC4I+6AuCPugLj3E3dA3BF3QNwRd0DcEXdA3BH3ciDuiDsg7og7IO6IOyDuiDsg7uXEHRB3xB0Q98PuaP1zs/ht83F91B1G1cQdEPf5+WJ7m3+43S7OV1EjcQfE/fRocpf/dDe5OI2qiDsg7u3F8ix7nC0v2qiFuAPivtpMs8j0cRU1EHdA3LsfTRZrll0MnbgD4n51mTu6vIohE3dA3J8mTe5uchODJe6AuK9n+SyzdQyTuAPifrzNZzs4jgESd0DcP89yD7OvMTTiDoh7e5J7OjmNQRF3QNzn17m361UMiLgD4t5N8z+YdrErxB34xd697LZ1JAEY7rJIhuSQFClLlmTLRuxcRolhzNheGL4MckMwi8Fskvd/l2RXQAAjicXT7NP8vof4F3X6VA0W9+tN7MXm36UR4g6I+2QaezKdFMS9AhD3Km1PTdRd3AFxv57GHk0bmMyIOyDuu03s1WZXDkzcAXHfLmLPFo/LQYk7IO6zm9i7X1blkMQdEPd/xACelwMSd0Dcv49BfF8ORtwBcV+uYxCbZTkUcQfE/V4M5KtyIOIOiPsXMZiX5SDEHRD3J+sYzPpJOQRxB8R9HgOalwMQd0Dcr2JQt6U+cQfE/VkM6lmpTtwBcd/FwHalNnEHxP0yBvahVCbugLgvpzGw6bLUJe6AuH8Tg3tYqhJ3QNxnT2NwT2elJnEHxP08KnhUahJ3QNwfRAUPSkXiDoj7ahMVbFalHnEHxP08ore5jLgD4n4RVVyUesQdEPfXUcWiVCPugLgvo5JlqUXcAXE/i0rellrEHRD3F1HJi1KLuAPifi8q+arUIu6AuK+jknUZi8mH2bjjDoj7SVTzn7G0fRqfzUYdd0Dcd1HNbjRtj6z7KOMOiPt5VPNoNG3Puo8z7oC4v4xqXo6l7Vn3kcYdEPc3Uc2bkbQ96z7WuAPi/jCSa0zZ9qz7COMOiPv9qOb+WNqedR9p3AFx/zaqmY+h7RXqLu6AuFdue4W6iztgLFO57RXqLu6AD6qV216h7uIOeApZue0V6i7ugJ+YKre9Qt3FHbB+oHLb69Rd3AGLw+q3vX7dxR2w8rd+27Pu4t4+EPf0NCpZt9z2CnUXd8CZvVbannUfVdwBcb8flbwYZduz7mOKOyDuZ1HJ2TjbnnUfUdwBcX8clSxH2vasu7g3D8Q9fRlVvB5t27Pu44k7IO7/jyouxtv2rPto4g6I+3lUcT76tmfd2487IO6rTVSwWY2+7Vn39uMOiHv5EBU86KDtWff24w6I+3lU8KiDtmfd2487IO6zRQzu6ayDtmfd2487IO7l6xjcN120PeveftwBcX88jYFNl120PeveftwBcS8/x8AuO2l71r39uAPivouB7fpoe9Zd3JsD4l7/NeSzbtqedW8/7oC4X01jSFfdtD3r3n7cAXEv8xjQvKO2Z93bjzsg7ifrGMz6SU9tz7o3H3dA3MurGMwXfbU969583AFxL6cxkHu9tT3r3nzcAXFfrmMQ62V3bc+6i3sbQNzrH1N922Hbs+6txx0Q93IRA7josu1Z99bjDoj77Cb27mbWZ9uz7o3HHRD3sl3Eni22vbY969543AFxL7tN7NVm12/bs+6Nxx0Q93K91wROr3tue9Zd3BsA4l4tgtNJ323Puot7VSDuFTKo7Vn3ZuMOiHu53sRebI5gJpN1bzzugLiX7xaxB4vdMbQ969543AFxL9ubuLOb7XG0PeveeNwBcS+zi7iji9mxtD3r3mjcAXFPZ+u4g/VZOZ62Z91bjzsg7uXxaXyy0+VRtT3r3mrcAXFPv67jk6xflSNre9a9+bgD4l5OXnxCGaffnhxf27PuzcYdEPd0dRl/0+VVOca2Z93bjTsg7ul/z/9GH6fPb8uRtj3r3nDcAXFP288X8ZcsPt+W42171r3luAPinmaTy038ic3lZFa0PevebNwBcU+ryfyf8VFfzierUrQ969543AFxT9tHD39axB8sTh/+d1uStmfdG487IO5pdfv+1bsf7//ux3ev3t+uStL2rLu4VwDiXom2Z937iTsg7tqede8n7oC4a3vWvZ+4A+Ku7Vn3fuIOiLu2Z937iTsg7tqede8n7oC4a3vWvZ+4A+Ku7Vn3fuIOiLu2Z937iTsg7tqede8n7oC4a3vWvZ+4A+Ku7Vn3fuIOiLu2Z937iTsg7tqede8n7oC4a3vWvZ+4A+Ku7Vn3fuIOiLu2Z937iTsg7tqede8n7oC4a3vWvZ+4A+Ku7Vn3fuIOiLu2Z937iTsg7tqede8n7oC4a3vWvZ+4A+Ku7Vn3fuIOiLu2Z937iTsg7tqede8n7oC4a3vWvZ+4A+Ku7Vn3fuIOiLu2Z937iTsg7tqede8n7oC4a3vWvZ+4A+Ku7Vn3fuIOiLu2Z937iTsg7tqede8n7oC4a3vWfZxxB8T9h6W2f9y/VmOMOyDu81gstf3jTlfjizsg7vOIrLu236Hu7cQdEPd5RNZd2+9Q93biDoj7PCLrru13qHs7cQfEfR6Rddf2O9S9nbgD4j6PlHVP2p51H0PcAXHPtmfdtf0v113cgZPf2Kmjk7ACIAiAeZqAmkAgWI1N2H83+dwC9uOOY6aIWZp7bs/ubu93l3uA3Edvz+5u73eXe4DcZ2/P7m6vd5d7gNyHb8/ubm93l3uA3Kdvz+5uL3eXe4Dcx2/P7m7vdpd7gNznb8/ubu92l3uA3Odvz+7d7XaXe4Dc52/P7sXtdpd7gNxHb+93z+12l3uA3Dfdnt3D7fFT7gWQ+9zt2d3tcu+B3Odvz+7rb5c7IPfcXuzudrk3QO7zt2d3t8u9B3Kfvz27L79d7oDcc3u/+/ztcgfkntur3d0u9x7Iff727O52ufdA7vO3Z/e9t8sdkHtu73efv13ugNxze7+72+XeA7nP357d3S73Hsh9/vbsvux2uQNyz+397vO3yx2Qe26vd991u9wBuef2fvf52+UOyD2397tvuV3ugNxze7+72+VeALnvuz27x2d/u9wBuQ/ent3j39OTOyD3wduzu9vlXgC5L7s9u7td7gWQ+7Lbs7vb5V4AuS+7Pbu7Xe4FkPuy27O72+VeALmvuj3ev54BcgfkntuR+2Ygd7fLHZC72+W+H8jd7XIH5O52ue8Hcne73AG5u13u+4Hc3S53QO5ul/t+IHe3yx2Qu9vlvh/I3e1yB+TudrnvB3J3u9wBubtd7vuB3N0ud0Dubpf7fiB3t8sdkLvb5b4fyN3tcgfk7na57wdyd7vcAbm7Xe77gdzdLndA7m6X+34gd7fLHZC72+W+H8jd7XIH5O52ue8Hcne73AG5u13u+4Hc3S53QO5ul/sBIHe3y/0AkLvb5X4ByN3tcj8I5O52uR8Ecne73A8Cubtd7geB3N0u94NA7m6X+0Egd7fL/SqQu9vlfh/I/f7tcgfk/v2cI3dA7r8f5A7I/Qq5A3JH7oDckTsgd+QOyL0nd0DuyB2QO3IH5I7cAbn35A7IHbkDckfugNyROyD3ntwBuSN3QO7IHZA7cgfk3pM7IHfkDsgduQNyR+6A3HtyB+SO3AG5I3dA7sgdkHtP7oDckTsgd+QOyB25A3LvyR2QO3IH5I7cAbkjd0DuPbkDckfugNyROyB35A7IvSd3QO7IHZA7cgfkPkrugNyROyB35A7IHbkDcu/JHZA7cgfkjtwBuSN3QO49uQNyR+6A3JE7IHfkDsi9Jff/7NRBSkNBEEXRKsWAkvx8JGrQQEgEUchMCEKmzpy4/9WIK+iadnPOFh7vBiDufaG0OSDuiDsg7og7IO6IOyDuiDsg7uJucxB3xB0Qd8QdEHfEHRB3xB0Qd8QdxN3RxR0Qd8QdEHfEHRB3xB0Qd8QdEHdxtzmIO+IOiDviDog74g6IO+IOiDviDuLu6OIOiDviDog74g6IO+IOiDviDmTbPkbCUtz/gbjfxkj4ybZ19A2Ysu09BsJXth2jb8Bntn3EQNhl20OMDzx9mmMYvGTBW/QNOGbBehGDYD5kwXf0DXjOiqdB6s58yopL9A14zZL9NgbA5pAld9E34Ddrbh7v50V0jOX2vMuaVXQO+GPv7lKbCKMwAJ9j2ikTJ2OMVhikpkjjhS2tgkpFFKogIope6P63ooIXSXeQ8z3POt6f4TChXMwdWOctcBP7DniWt8AU+w74krtg7GLfAd0id8Cj2H/Ace6AVew/YMptMA5RAPAht8D3qAD4nFvgflQAzMaEci9MwIOEcqNhwJMxodxlLnCa/8GrqAIY+iwHBSZglf/AOI9CgKv8C75GJcBykZCbLkoBHicsTgIQdq+Gb1EN0L3OxvEj6gFmF9k0zqMiYNlnwzjqoiRg3mezuDdEUcD8LBvFryHKApaX2STOuygMGK6yQXyM4oCbbA2LgygPmPpsCpuTaAAwu5vtYLzuog3AdJGN4Ok8mgF0L/tsAOspmgIMb86yOH4fRHOA7uGnrIvx+Ge0CVher7MixqO3QzQMeL96fnmYhTBuTl90AfCHHThEAQAGAQAICw40LBhta37AYDHZ/P97fIfgQYhz3jPbep/UCrs9OiQAAICBILT+qafPvoYK5BYAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABgAQAAAAAAAAAAAAAAAAAAAAAA8J8HasaIBWRZAAAAAElFTkSuQmCC";var $=function(e){var t=e.activeUser,A=e.onLogout,s=e.message_items,c=e.addMessageItems,r=Object(a.useState)(!1),o=Object(i.a)(r,2),d=o[0],j=o[1],u=Object(a.useState)(""),b=Object(i.a)(u,2),O=b[0],h=b[1],x=Object(a.useState)(""),m=Object(i.a)(x,2),f=m[0],v=m[1],w=Object(a.useState)([]),y=Object(i.a)(w,2),N=y[0],D=y[1],I=N.filter((function(e){return e.title.toLowerCase().includes(O.toLowerCase())||e.details.toLowerCase().includes(O.toLowerCase())}));function H(){return(H=Object(C.a)(p.a.mark((function e(t,A,n,a){var s,c,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=B.a.Object.extend("Message"),(c=new s).set("title",t),c.set("details",A),a?c.set("img",new B.a.File(a.name,a)):c.set("img",new B.a.File("placeHolderImage",{base64:_})),c.set("priority",n),c.set("date",(new Date).toString()),c.set("isRead",[]),c.set("building",B.a.User.current().attributes.building),c.relation("userId").add(B.a.User.current()),e.next=13,c.save();case 13:r=e.sent,D(N.concat(new Y(r)));case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function k(e){var t=B.a.Object.extend("Message");new B.a.Query(t).get(e).then((function(t){t.destroy().then((function(t){var A=N.find((function(t){return t.id===e})),n=N.indexOf(A);N.splice(n,1),D(Object(P.a)(N)),console.log("Deleted Message",t)}),(function(e){console.error("Error while deleting Message",e)}))}))}function E(e,t,A,n,a){var s=B.a.Object.extend("Message");new B.a.Query(s).get(a).then((function(s){s.set("title",e),s.set("details",t),s.set("priority",A),n?s.set("img",new B.a.File(n.name,n)):s.set("img",new B.a.File("placeHolderImage",{base64:_})),s.save().then((function(s){var c=N.find((function(e){return e.id===a})),r=N.indexOf(c);N[r].title=e,N[r].details=t,N[r].priority=A,N[r].img=""===n?n:s.get("img").url(),D(Object(P.a)(N)),console.log("Updated Message ",s)}),(function(e){console.error("Error while updating Message",e)}))}))}if(Object(a.useEffect)((function(){function e(){return(e=Object(C.a)(p.a.mark((function e(){var t,A,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=B.a.Object.extend("Message"),(A=new B.a.Query(t)).equalTo("building",B.a.User.current().attributes.building),e.next=5,A.find();case 5:n=e.sent,D(n.map((function(e){return new Y(e)})));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}t&&function(){e.apply(this,arguments)}()}),[t]),!t)return Object(n.jsx)(l.a,{to:"/"});var U=(I=I.filter((function(e){return e.priority.toLowerCase().includes(f.toLowerCase())}))).map((function(e){return Object(n.jsx)(Q,{message:e,message_items:s,addMessageItems:c,removeMessage:k,activeUser:t,updateMessageContent:E})}));return Object(n.jsxs)("div",{className:"p-messages",children:[Object(n.jsx)(g,{activeUser:t,onLogout:A}),Object(n.jsxs)("h1",{children:["Messages for bulding: ",t.building.toUpperCase()]}),Object(n.jsx)(W,{isMessagesPage:!0,filteredText:O,onFilterChange:function(e){return h(e.target.value)},priorityFilter:f,FilterPriority:function(e,t){"No Filter"===t.target.innerHTML?v(""):v(t.target.innerHTML)},Sort:function(e){"date"===e?N.sort((function(e,t){var A=Date.parse(e.date);return Date.parse(t.date)-A})):N.sort((function(e,t){var A=e.priority.toUpperCase(),n=t.priority.toUpperCase();return A<n?-1:A>n?1:0})),D(Object(P.a)(N))}}),Object(n.jsx)("div",{className:"b-new-message",style:{visibility:"committee"===t.role?"visible":"hidden"},children:Object(n.jsx)(L.a,{variant:"link",onClick:function(){return j(!0)},children:"New Message"})}),Object(n.jsx)(X,{panels:U,updateMessage:function(e,t){var A=B.a.Object.extend("Message");new B.a.Query(A).get(e).then((function(A){var n=A.get("isRead");n.includes(t)||n.push(t),A.set("isRead",n),A.save().then((function(A){var n=N.find((function(t){return t.id===e})),a=N.indexOf(n);N[a].isRead.push(t),D(Object(P.a)(N)),console.log("Updated Message Read status",A)}),(function(e){console.error("Error while updating Message",e)}))}))}}),Object(n.jsx)(T,{isUpdate:"false",show:d,handleClose:function(){return j(!1)},addMessage:function(e,t,A,n){return H.apply(this,arguments)}})]})};A(853);var ee=function(e){var t=e.updateOptions,A=Object(a.useState)([]),s=Object(i.a)(A,2),c=s[0],r=s[1],o=Object(a.useState)(""),l=Object(i.a)(o,2),d=l[0],j=l[1],u=c.map((function(e){return Object(n.jsx)("div",{className:"option-added",children:Object(n.jsx)(y.a.Control,{type:"text",value:e})})}));return Object(n.jsxs)("div",{children:[u,Object(n.jsx)("div",{children:Object(n.jsx)(y.a.Control,{type:"text",placeholder:"New Option",value:d,onChange:function(e){return j(e.target.value)}})}),Object(n.jsx)("div",{className:"option-add-button",children:Object(n.jsx)(L.a,{onClick:function(){r(c.concat(d)),j(""),t(c.concat(d))},children:"Add Option"})})]})};var te=function(e){var t=e.show,A=e.handleClose,s=e.addVote,c=Object(a.useState)(""),r=Object(i.a)(c,2),o=r[0],l=r[1],d=Object(a.useState)(""),j=Object(i.a)(d,2),O=j[0],h=j[1],g=Object(a.useState)([]),x=Object(i.a)(g,2),m=x[0],f=x[1],v=Object(a.useState)(new Date),p=Object(i.a)(v,2),C=p[0],w=p[1];function N(){l(""),h(""),f([]),w(""),A()}return Object(n.jsxs)(E.a,{show:t,onHide:N,size:"xl",children:[Object(n.jsx)(E.a.Header,{closeButton:!0,children:Object(n.jsx)(E.a.Title,{children:"New Vote"})}),Object(n.jsx)(E.a.Body,{children:Object(n.jsxs)(y.a,{children:[Object(n.jsxs)(y.a.Group,{as:u.a,controlId:"formHorizontalTitle",children:[Object(n.jsx)(y.a.Label,{column:!0,sm:2,children:"Title:"}),Object(n.jsx)(b.a,{sm:10,children:Object(n.jsx)(y.a.Control,{type:"text",placeholder:"Vote Title",value:o,onChange:function(e){return l(e.target.value)}})})]}),Object(n.jsxs)(y.a.Group,{as:u.a,controlId:"formHorizontalDetails",children:[Object(n.jsx)(y.a.Label,{column:!0,sm:2,children:"Details:"}),Object(n.jsx)(b.a,{sm:10,children:Object(n.jsx)(y.a.Control,{as:"textarea",rows:3,type:"text",placeholder:"Vote Details",value:O,onChange:function(e){return h(e.target.value)}})})]}),Object(n.jsxs)(y.a.Group,{as:u.a,controlId:"formHorizontalOptions",children:[Object(n.jsx)(y.a.Label,{column:!0,sm:2,children:"Options:"}),Object(n.jsx)(b.a,{sm:10,children:Object(n.jsx)(ee,{updateOptions:function(e){f(e)}})})]}),Object(n.jsxs)(y.a.Group,{as:u.a,controlId:"formHorizontalEndDate",children:[Object(n.jsx)(y.a.Label,{column:!0,sm:2,children:"End Date:"}),Object(n.jsx)(b.a,{sm:2,children:Object(n.jsx)(y.a.Control,{type:"date",onChange:function(e){return w(e.target.value)}})})]})]})}),Object(n.jsxs)(E.a.Footer,{children:[Object(n.jsx)(L.a,{variant:"secondary",onClick:N,children:"Cancel"}),Object(n.jsx)(L.a,{variant:"primary",onClick:function(){var e=new Date(C),t=JSON.stringify(e),A=JSON.parse(t);s(o,O,m,A),N()},children:"Create Vote"})]})]})};A(854);var Ae=function(e){var t=e.panels,A=e.isResaultAccordion;return Object(n.jsx)(R.a,{children:t.map((function(e,t){return Object(n.jsxs)(x.a,{children:[Object(n.jsx)(R.a.Toggle,{className:"accordionHeader",as:x.a.Header,eventKey:t.toString(),children:"true"===A?Object(n.jsxs)(u.a,{children:[Object(n.jsx)(b.a,{sm:9,className:"accordion-header-title",children:e.props.vote.title}),Object(n.jsx)(b.a,{sm:3,className:"accordion-header-result",children:"Result: "+e.props.vote.result})]}):Object(n.jsx)("div",{children:e.props.vote.title})}),Object(n.jsx)(R.a.Collapse,{eventKey:t.toString(),children:Object(n.jsx)(x.a.Body,{children:e})})]},t)}))})},ne=A(447),ae=A(446),se=A(22),ce=se.Modal,re=se.Form,ie=se.Button,oe=se.Col,le=se.Row;var de=function(e){var t=e.show,A=e.handleClose,s=e.handleUpdateEndDate,c=Object(a.useState)(new Date),r=Object(i.a)(c,2),o=r[0],l=r[1];return Object(n.jsx)(n.Fragment,{children:Object(n.jsxs)(ce,{size:"sm",show:t,onHide:A,"aria-labelledby":"example-modal-sizes-title-sm",children:[Object(n.jsx)(ce.Header,{closeButton:!0,children:Object(n.jsx)(ce.Title,{id:"example-modal-sizes-title-sm",children:"Small Modal"})}),Object(n.jsx)(ce.Body,{children:Object(n.jsxs)(re.Group,{as:le,controlId:"formHorizontalEndDate",children:[Object(n.jsx)(re.Label,{column:!0,children:"Choose End Date:"}),Object(n.jsx)(oe,{children:Object(n.jsx)(re.Control,{type:"date",value:o,onChange:function(e){return l(e.target.value)}})})]})}),Object(n.jsx)(ce.Footer,{children:Object(n.jsx)(ie,{variant:"primary",onClick:function(){var e=new Date(o),t=JSON.stringify(e),n=JSON.parse(t);s(n),A()},children:"Update End Date"})})]})})},je=A(469),ue=A(470);A(949);var be=function(e){var t=e.title,A=e.vote,s=a.useMemo((function(){console.log("calculating chart data");var e,t=function(e){for(var t={pieColors:[],pieColorsBorder:[]},A=["rgba(255, 99, 132, ","rgba(54, 162, 235, ","rgba(10, 57, 173, ","rgba(10, 84, 48, ","rgba(2, 86, 86,","rgba(3, 29, 8, ","rgba(165, 85, 48, ","rgba(97, 232, 249, ","rgba(219, 186, 252, ","rgba(183, 220, 23, "],n=0;n<e;++n){var a=A[n%A.length]+"0.2)",s=A[n%A.length]+"1)";t.pieColors.push(a),t.pieColorsBorder.push(s)}return t}(A.options.length),n=[],a=Object(je.a)(A.options);try{for(a.s();!(e=a.n()).done;){for(var s=e.value,c=0,r=0,i=Object.values(A.votesPieData);r<i.length;r++){i[r]===s&&c++}n.push(c)}}catch(o){a.e(o)}finally{a.f()}return{labels:A.options,datasets:[{label:"# of Votes",data:n,backgroundColor:t.pieColors,borderColor:t.pieColorsBorder,borderWidth:1}]}}),[A]);return Object(n.jsxs)(j.a,{className:"chart-title",children:[Object(n.jsx)(x.a.Title,{children:t}),0===Object.keys(A.votesPieData).length?Object(n.jsx)("p",{style:{backgroundColor:"yellow"},children:"No Votes Yet"}):Object(n.jsx)(ue.Pie,{options:{legend:{display:!1}},data:s})]})};A(950);var Oe=function(e){var t=e.vote,A=e.activeUser,s=e.updateEndDate,c=e.AddUsersVote,r=Object(a.useState)(!1),o=Object(i.a)(r,2),l=o[0],d=o[1],O=Object(a.useState)(t.options[0]),h=Object(i.a)(O,2),g=h[0],x=h[1],m=0,f=t.endDate.substring(0,16);f=f.replace("T"," ");var v=t.options.map((function(e){return Object(n.jsx)("option",{children:e},m++)})),p=Object(n.jsxs)(ne.a,{id:"popover-basic",children:[Object(n.jsx)(ne.a.Title,{as:"h3",children:"Thank you for your vote"}),Object(n.jsxs)(ne.a.Content,{children:["results will be available at ",Object(n.jsx)("strong",{children:f})]})]});return Object(n.jsxs)("div",{className:"c-vote-card",children:["committee"===A.role?Object(n.jsx)(j.a,{fluid:!0,children:Object(n.jsxs)(u.a,{children:[Object(n.jsxs)(b.a,{children:[Object(n.jsx)(u.a,{children:Object(n.jsxs)("div",{className:"vote-details",children:[Object(n.jsx)("label",{children:"Details: "}),Object(n.jsx)("p",{children:t.details})]})}),Object(n.jsxs)(u.a,{children:[Object(n.jsxs)("div",{className:"vote-end-date",children:[Object(n.jsx)("label",{children:"End date: "}),Object(n.jsx)("p",{children:f})]}),Object(n.jsx)(L.a,{className:"b-update",variant:"warning",onClick:function(){return d(!0)},children:"Update End Date"})]})]}),Object(n.jsx)(b.a,{sm:6,children:Object(n.jsx)(be,{title:"Results",vote:t})})]})}):Object(n.jsx)(y.a,{children:Object(n.jsxs)(y.a.Group,{as:u.a,controlId:"formHorizontalVote"+m+t.title,children:[Object(n.jsx)(y.a.Label,{column:!0,sm:2,children:"Your Vote:"}),Object(n.jsxs)(b.a,{sm:10,children:[Object(n.jsx)(y.a.Control,{as:"select",onChange:function(e){return x(e.target.value)},children:v}),Object(n.jsxs)("div",{className:"vote-button",children:[Object(n.jsx)(ae.a,{trigger:"click",placement:"right",overlay:p,children:Object(n.jsx)(L.a,{variant:"warning",onClick:function(){c(g,t.id,A.id)},children:"Submit Vote"})}),Object(n.jsxs)("div",{className:"vote-end-date",children:[Object(n.jsx)("label",{children:"Vote end at: "}),Object(n.jsx)("p",{children:f})]})]})]})]})}),Object(n.jsx)(de,{show:l,handleClose:function(){return d(!1)},handleUpdateEndDate:function(e){s(t.id,e)}})]})};A(951);var he=function(e){var t=e.vote,A=t.endDate.substring(0,16);return A=A.replace("T"," "),Object(n.jsx)("div",{className:"c-vote-card",children:Object(n.jsx)(j.a,{fluid:!0,children:Object(n.jsxs)(u.a,{children:[Object(n.jsxs)(b.a,{children:[Object(n.jsx)(u.a,{children:Object(n.jsxs)("div",{className:"vote-details",children:[Object(n.jsx)("label",{children:"Details: "}),Object(n.jsx)("p",{children:t.details})]})}),Object(n.jsx)(u.a,{children:Object(n.jsxs)("div",{className:"vote-end-date",children:[Object(n.jsx)("label",{children:"End date: "}),Object(n.jsx)("p",{children:A})]})})]}),Object(n.jsx)(b.a,{sm:4,children:Object(n.jsx)(be,{title:"Results",vote:t})}),Object(n.jsx)(b.a,{sm:4,children:Object(n.jsx)(be,{title:"Voting Precentage",vote:t})})]})})})},ge=function e(t){Object(N.a)(this,e),this.id=t.id,this.title=t.get("title"),this.details=t.get("details"),this.options=t.get("options"),this.building=t.get("building"),this.endDate=t.get("endDate"),this.voteStatus=t.get("voteStatus"),this.result=t.get("result"),this.votesPieData=t.get("votesPieData")};var xe=function(e){var t=e.activeUser,A=e.onLogout,s=Object(a.useState)(!1),c=Object(i.a)(s,2),r=c[0],o=c[1],d=Object(a.useState)(""),O=Object(i.a)(d,2),h=O[0],x=O[1],m=Object(a.useState)([]),f=Object(i.a)(m,2),v=f[0],w=f[1];function y(){return(y=Object(C.a)(p.a.mark((function e(t,A,n,a){var s,c,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=B.a.Object.extend("Vote"),(c=new s).set("title",t),c.set("details",A),c.set("building",B.a.User.current().attributes.building),c.set("options",n),c.set("voteStatus","active"),c.set("endDate",a),c.set("result",""),c.set("votesPieData",{}),c.relation("userId").add(B.a.User.current()),e.next=14,c.save();case 14:r=e.sent,w(v.concat(new ge(r)));case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function N(e,t,A){var n=B.a.Object.extend("Vote");new B.a.Query(n).get(t).then((function(n){var a=n.get("votesPieData");a[A]=e,n.set("votesPieData",a),n.save().then((function(n){var a=v.find((function(e){return e.id===t})),s=v.indexOf(a);v[s].votesPieData[A]=e,w(Object(P.a)(v))}),(function(e){console.error("Error while updating Vote",e)}))}))}function D(e,t){var A=B.a.Object.extend("Vote");new B.a.Query(A).get(e).then((function(A){A.set("endDate",t),A.save().then((function(A){var n=v.find((function(t){return t.id===e})),a=v.indexOf(n);v[a].endDate=t,w(Object(P.a)(v))}),(function(e){console.error("Error while updating Vote",e)}))}))}if(Object(a.useEffect)((function(){function e(){return(e=Object(C.a)(p.a.mark((function e(){var t,A,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=B.a.Object.extend("Vote"),(A=new B.a.Query(t)).equalTo("userId",B.a.User.current()),e.next=5,A.find();case 5:n=e.sent,w(n.map((function(e){return new ge(e)})));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}t&&function(){e.apply(this,arguments)}()}),[t,v]),v.forEach((function(e){var t=B.a.Object.extend("Vote");new B.a.Query(t).get(e.id).then((function(t){var A=new Date>=new Date(t.get("endDate"))?"not active":"active";t.set("voteStatus",A),t.save().then((function(t){e.voteStatus=A}),(function(e){console.error("Error while updating Vote",e)}))}))})),!t)return Object(n.jsx)(l.a,{to:"/"});var I=v.filter((function(e){return e.title.toLowerCase().includes(h.toLowerCase())||e.details.toLowerCase().includes(h.toLowerCase())})),H=v.filter((function(e){return"active"===e.voteStatus})).map((function(e){return Object(n.jsx)(Oe,{vote:e,activeUser:t,updateEndDate:D,AddUsersVote:N})})),k=I.filter((function(e){return"active"!==e.voteStatus})).map((function(e){return Object(n.jsx)(he,{vote:e,activeUser:t})}));return Object(n.jsxs)("div",{className:"p-votes",children:[Object(n.jsx)(g,{activeUser:t,onLogout:A}),Object(n.jsx)(j.a,{fluid:!0,children:Object(n.jsxs)(u.a,{children:[Object(n.jsxs)(b.a,{className:"block-example border-right border-dark",sm:6,children:[Object(n.jsx)("h1",{children:"Active Votings"}),Object(n.jsx)("div",{className:"b-new-vote",style:{visibility:"committee"===t.role?"visible":"hidden"},children:Object(n.jsx)(L.a,{variant:"link",onClick:function(){return o(!0)},children:"New Vote"})}),Object(n.jsx)(Ae,{panels:H,isResaultAccordion:"false"})]}),Object(n.jsxs)(b.a,{sm:6,children:[Object(n.jsx)("h1",{children:"Voting Results"}),Object(n.jsx)(W,{isMessagesPage:!1,filteredText:h,onFilterChange:function(e){return x(e.target.value)}}),Object(n.jsx)(Ae,{panels:k,isResaultAccordion:"true"})]})]})}),Object(n.jsx)(te,{show:r,handleClose:function(){return o(!1)},addVote:function(e,t,A,n){return y.apply(this,arguments)}})]})};var me=function(e){var t=e.show,A=e.handleClose,s=e.addTenant,c=e.userId,r=e.tenants,o=e.isUpdate,l=e.updateTenantContent,d=Object(a.useState)("eyal@barak.com"),j=Object(i.a)(d,2),O=j[0],h=j[1],g=Object(a.useState)("123"),x=Object(i.a)(g,2),m=x[0],f=x[1],v=Object(a.useState)("Eyal"),p=Object(i.a)(v,2),C=p[0],w=p[1],N=Object(a.useState)("Barak"),I=Object(i.a)(N,2),H=I[0],k=I[1],P=Object(a.useState)("Einstein"),T=Object(i.a)(P,2),S=T[0],z=T[1],M=Object(a.useState)(""),F=Object(i.a)(M,2),Q=F[0],R=F[1];function X(){h(""),f(""),w([]),k(""),z(""),R(""),A()}var V=Q?URL.createObjectURL(Q):"";return Object(n.jsxs)(E.a,{show:t,onHide:X,size:"xl",children:[Object(n.jsx)(E.a.Header,{closeButton:!0,children:Object(n.jsx)(E.a.Title,{children:"Create a Committee Member Account"})}),Object(n.jsx)(E.a.Body,{children:Object(n.jsxs)(y.a,{children:[Object(n.jsxs)(y.a.Group,{controlId:"formBasicfname",children:[Object(n.jsx)(y.a.Label,{children:"First Name"}),Object(n.jsx)(y.a.Control,{type:"text",placeholder:"Enter first name",value:C,onChange:function(e){return w(e.target.value)}})]}),Object(n.jsxs)(y.a.Group,{controlId:"formBasiclname",children:[Object(n.jsx)(y.a.Label,{children:"Last Name"}),Object(n.jsx)(y.a.Control,{type:"text",placeholder:"Enter last name",value:H,onChange:function(e){return k(e.target.value)}})]}),Object(n.jsxs)(y.a.Group,{controlId:"formBasicEmail",children:[Object(n.jsx)(y.a.Label,{children:"Email address"}),Object(n.jsx)(y.a.Control,{type:"email",placeholder:"Enter email",value:O,onChange:function(e){return h(e.target.value)}}),Object(n.jsx)(y.a.Text,{className:"text-muted",children:"We'll never share your email with anyone else."})]}),Object(n.jsxs)(y.a.Group,{controlId:"formBasicPassword",children:[Object(n.jsx)(y.a.Label,{children:"Password"}),Object(n.jsx)(y.a.Control,{type:"password",placeholder:"Password",value:m,onChange:function(e){return f(e.target.value)}})]}),Object(n.jsxs)(y.a.Group,{controlId:"formHorizontalImage",children:[Object(n.jsx)(y.a.Label,{children:"Image URL"}),Object(n.jsxs)(u.a,{children:[Object(n.jsx)(b.a,{sm:5,children:Object(n.jsx)(y.a.Control,{type:"file",accept:"image/*",onChange:function(e){1===e.target.files.length?R(e.target.files[0]):R(null)}})}),Object(n.jsx)(b.a,{sm:5,children:Object(n.jsx)(U.a,{width:"200",height:"200",src:""===V?"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQ4tJDcJYnlhTCuciLukYiHdpeS9XL5wGGHSg&usqp=CAU":V})})]})]}),Object(n.jsxs)(y.a.Group,{controlId:"formBasicbuilding",children:[Object(n.jsx)(y.a.Label,{children:"Building/Condomium Community Name"}),Object(n.jsx)(y.a.Control,{type:"text",placeholder:"Building/Condomium Community Name",value:S,onChange:function(e){return z(e.target.value)}})]})]})}),Object(n.jsx)("div",{children:"true"===o?Object(n.jsx)(E.a.Footer,{children:Object(n.jsx)(L.a,{variant:"primary",onClick:function(){l(C,H,O,S,m,Q,c),X()},children:"Update Tenant"})}):Object(n.jsxs)(E.a.Footer,{children:[Object(n.jsx)(L.a,{variant:"secondary",onClick:X,children:"Cancel"}),Object(n.jsx)(L.a,{variant:"primary",onClick:function(){var e=new B.a.User;e.set("username",C),e.set("email",O),e.set("fname",C),e.set("lname",H),e.set("building",S),Q?e.set("img",new B.a.File(Q.name,Q)):e.set("img",new B.a.File("placeHolderImage",{base64:_})),e.set("role","tenant"),e.set("password",m),e.set("emailAddrr",O);var t=B.a.User.current().get("sessionToken");e.signUp().then((function(e){var A=new B.a.ACL(e);A.setPublicWriteAccess(!0),A.setPublicReadAccess(!0),e.setACL(A),e.save(),B.a.User.become(t).then((function(e){}),(function(e){})),s(r.concat(new D(e))),console.log("User signed up",e)})).catch((function(e){console.error("Error while signing up user",e)})),X()},children:"Add Tenant"})]})})]})};A(952);var fe=function(e){var t=e.tenant,A=e.removeTenant,s=e.updateTenantContent,c=Object(a.useState)(!1),r=Object(i.a)(c,2),o=r[0],l=r[1];return Object(n.jsxs)("div",{className:"c-tenant-card",children:[Object(n.jsx)(j.a,{fluid:!0,children:Object(n.jsxs)(u.a,{children:[Object(n.jsx)(b.a,{sm:10,children:Object(n.jsxs)(u.a,{children:[Object(n.jsx)(b.a,{sm:4,children:Object(n.jsx)("img",{alt:"tenantImg",className:"tenant-image",src:""===t.img?"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQ4tJDcJYnlhTCuciLukYiHdpeS9XL5wGGHSg&usqp=CAU":t.img})}),Object(n.jsxs)(b.a,{sm:8,children:[Object(n.jsxs)("div",{className:"tenant-name",children:[Object(n.jsx)("label",{children:"Name: "}),Object(n.jsx)("p",{children:t.fname+" "+t.lname})]}),Object(n.jsxs)("div",{className:"tenant-email",children:[Object(n.jsx)("label",{children:"Email: "}),Object(n.jsx)("p",{children:t.email})]}),Object(n.jsxs)("div",{className:"tenant-building",children:[Object(n.jsx)("label",{children:"Building: "}),Object(n.jsx)("p",{children:t.building})]})]})]})}),Object(n.jsxs)(b.a,{className:"tenant-card-buttons",sm:2,children:[Object(n.jsx)(L.a,{className:"b-update-button",variant:"info",onClick:function(){return l(!0)},children:"Update"}),Object(n.jsx)(L.a,{onClick:function(){A(t.id)},className:"b-delete-button",variant:"danger",children:"Delete"})]})]})}),Object(n.jsx)(me,{isUpdate:"true",show:o,handleClose:function(){return l(!1)},updateTenantContent:s,userId:t.id})]})};A(953),A(954);var ve=function(e){var t=e.panels;return Object(n.jsx)(R.a,{children:t.map((function(e,t){return Object(n.jsxs)(x.a,{children:[Object(n.jsx)(R.a.Toggle,{className:"accordionHeader",as:x.a.Header,eventKey:t.toString(),children:Object(n.jsx)("div",{children:e.props.tenant.fname+" "+e.props.tenant.lname})}),Object(n.jsx)(R.a.Collapse,{eventKey:t.toString(),children:Object(n.jsx)(x.a.Body,{children:e})})]},t)}))})};var pe=function(e){var t=e.activeUser,A=e.onLogout,s=Object(a.useState)(!1),c=Object(i.a)(s,2),r=c[0],o=c[1],d=Object(a.useState)(""),j=Object(i.a)(d,2),u=j[0],b=j[1],O=Object(a.useState)([]),h=Object(i.a)(O,2),x=h[0],m=h[1],f=x.filter((function(e){return e.fname.toLowerCase().includes(u.toLowerCase())||e.lname.toLowerCase().includes(u.toLowerCase())||e.email.toLowerCase().includes(u.toLowerCase())}));if(Object(a.useEffect)((function(){function e(){return(e=Object(C.a)(p.a.mark((function e(){var t,A,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=B.a.Object.extend("User"),(A=new B.a.Query(t)).equalTo("role","tenant"),e.next=5,A.find();case 5:n=e.sent,m(n.map((function(e){return new D(e)})));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}t&&function(){e.apply(this,arguments)}()}),[t]),!t)return Object(n.jsx)(l.a,{to:"/"});function v(e){var t=new B.a.User;new B.a.Query(t).get(e).then((function(t){t.destroy().then((function(t){var A=x.find((function(t){return t.id===e})),n=x.indexOf(A);x.splice(n,1),m(Object(P.a)(x)),console.log("Deleted user",t)}),(function(e){console.error("Error while deleting user",e)}))}))}function w(e,t,A,n,a,s,c){var r=new B.a.User;new B.a.Query(r).get(c).then((function(r){r.set("email",A),r.set("fname",e),r.set("lname",t),r.set("building",n),s?r.set("img",new B.a.File(s.name,s)):r.set("img",new B.a.File("placeHolderImage",{base64:_})),r.save().then((function(r){var i=x.find((function(e){return e.id===c})),o=x.indexOf(i);x[o].fname=e,x[o].lname=t,x[o].email=A,x[o].building=n,x[o].pwd=a,x[o].img=""===s?s:r.get("img").url(),m(Object(P.a)(x)),console.log("Updated user",r)})).catch((function(e){console.error("Error while updating user",e)}))}))}var y=f.map((function(e){return Object(n.jsx)(fe,{tenant:e,removeTenant:v,activeUser:t,updateTenantContent:w})}));return Object(n.jsxs)("div",{className:"p-tenants",children:[Object(n.jsx)(g,{activeUser:t,onLogout:A}),Object(n.jsxs)("h1",{children:["Tenants for bulding: ",t.building.toUpperCase()]}),Object(n.jsx)(W,{isMessagesPage:!1,filteredText:u,onFilterChange:function(e){return b(e.target.value)}}),Object(n.jsx)("div",{className:"b-new-tenants",children:Object(n.jsx)(L.a,{variant:"link",onClick:function(){return o(!0)},children:"New Tenant"})}),Object(n.jsx)(ve,{panels:y}),Object(n.jsx)(me,{isUpdate:"false",show:r,handleClose:function(){return o(!1)},tenants:x,addTenant:m})]})};var Ce=function(){var e=Object(a.useState)(B.a.User.current()?new D(B.a.User.current()):null),t=Object(i.a)(e,2),A=t[0],s=t[1];function c(){s(null),B.a.User.logOut()}function r(e){s(e)}return Object(n.jsx)(o.a,{children:Object(n.jsxs)(l.d,{children:[Object(n.jsx)(l.b,{exact:!0,path:"/",children:Object(n.jsx)(f,{activeUser:A,onLogout:c})}),Object(n.jsx)(l.b,{exact:!0,path:"/login",children:Object(n.jsx)(H,{activeUser:A,onLogin:r})}),Object(n.jsx)(l.b,{exact:!0,path:"/signup",children:Object(n.jsx)(k,{activeUser:A,onLogin:r})}),Object(n.jsx)(l.b,{exact:!0,path:"/tenants",children:Object(n.jsx)(pe,{activeUser:A,onLogin:r,onLogout:c})}),Object(n.jsxs)(l.b,{exact:!0,path:"/messages",children:[" ",Object(n.jsx)($,{activeUser:A,onLogout:c})," "]}),Object(n.jsxs)(l.b,{exact:!0,path:"/voting",children:[" ",Object(n.jsx)(xe,{activeUser:A,onLogout:c})]})]})})},we=function(e){e&&e instanceof Function&&A.e(3).then(A.bind(null,960)).then((function(t){var A=t.getCLS,n=t.getFID,a=t.getFCP,s=t.getLCP,c=t.getTTFB;A(e),n(e),a(e),s(e),c(e)}))};B.a.serverURL="https://parseapi.back4app.com",B.a.initialize("XtgiTRuyAyCslj3oa5cHUXxkGcLmjIzIMcJ708N9","n1adUT1XhcHQlK50lPrnNR0qzfzEpxZbZohWQuBX"),r.a.render(Object(n.jsx)(s.a.StrictMode,{children:Object(n.jsx)(Ce,{})}),document.getElementById("root")),we()}},[[955,1,2]]]);
//# sourceMappingURL=main.dacee557.chunk.js.map